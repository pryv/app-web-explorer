(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"0fe9":function(t,e,s){},"1c99":function(t,e,s){},"1d53":function(t,e,s){"use strict";var n=s("a19e"),a=s.n(n);a.a},2469:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white shadow h-100 w-100 d-flex justify-content-center"},[s("div",{staticClass:"bg-white py-2 w-90"},[s("div",{staticClass:"card-style info-card"},[s("b-row",[s("b-col",{attrs:{cols:"10"}},[s("h4",[t._v("Access Info Panel")])]),s("b-col",{staticClass:"px-0 float-right",attrs:{cols:"2"}},[t.infoJSON?s("PryvBtn",{staticClass:"mt-0 mr-0",attrs:{content:"Back",icon:"arrow-left"},on:{click:t.backToEvents}}):t._e(),s("PryvBtn",{staticClass:"mt-0",attrs:{id:"submitBtn",icon:"plus",content:"Stream"},on:{click:function(e){return t.$bvModal.show("modal-scoped-stream")}}}),s("AddStreamModal")],1)],1)],1),s("div",[t.infoJSON?s("b-card",{staticClass:"text-info"},[s("vue-json-pretty",{attrs:{path:"res",data:this.infoJSON}}),s("b-row",{staticClass:"justify-content-center"},[s("PryvBtn",{staticClass:"mt-0",attrs:{content:"Disconnect",icon:"power"},on:{click:t.logout}})],1)],1):s("b-card",{staticClass:"text-info"},[t._v(" Please select an endpoint to view the access data ")])],1)])])},a=[],i=s("2f62"),r=s("d538"),o=s.n(r),l=s("b707"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-modal",{ref:"modal",attrs:{id:"modal-scoped-stream",title:"Add a new stream"},on:{hidden:t.resetModal,ok:t.handleOk,show:t.resetModal},scopedSlots:t._u([{key:"default",fn:function(){return[s("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[s("b-form-group",{attrs:{label:"ID","label-for":"input-id"}},[s("b-form-input",{attrs:{type:"text",id:"input-id",placeholder:"Enter ID"},model:{value:t.selectedId,callback:function(e){t.selectedId=e},expression:"selectedId"}})],1),s("b-form-group",{attrs:{label:"Parent *","label-for":"input-stream"}},[s("b-form-input",{attrs:{placeholder:"Select a stream",list:"input-stream-list",id:"input-stream",autocomplete:"off"},model:{value:t.selectedParentId,callback:function(e){t.selectedParentId=e},expression:"selectedParentId"}}),s("b-form-datalist",{attrs:{id:"input-stream-list",options:t.streamNames}})],1),s("b-form-group",{attrs:{label:"Name *","label-for":"input-name",state:t.nameState,"invalid-feedback":"Name is required"}},[s("b-form-input",{attrs:{type:"text",value:t.selectedName,id:"input-name",placeholder:"Enter name",required:"",state:t.nameState},on:{input:t.setName}})],1),s("b-form-group",{attrs:{label:"Client Data","label-for":"input-client-data"}},[s("v-jsoneditor",{attrs:{plus:!1,height:"200px",options:{enableTransform:!1,enableSort:!1,statusBar:!1,mainMenuBar:!0,search:!1,navigationBar:!1,mode:"code",onChangeText:function(e){t.isJSON(e)}}}})],1)],1)]},proxy:!0},{key:"modal-footer",fn:function(e){e.ok;var n=e.cancel;return[s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"OK",icon:"check",type:"submit",variant:"success",disabled:t.okDisable},on:{click:t.handleOk}}),s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"Cancel",icon:"x"},on:{click:function(t){return n()}}})]}}])})},u=[],d=s("b8fc"),p={name:"AddStreamModal",components:{PryvBtn:l["a"]},data(){return{selectedId:null,selectedParentId:null,selectedName:null,clientData:null,nameState:null,okDisable:!1}},computed:{...Object(i["b"])(["viewAccessInfo"]),...Object(i["b"])(["connectionsMap"]),streamsMap:{get(){return this.$store.state.streamsMap},set(t){this.$store.commit("UPDATE_STREAMS_MAP",t)}},streamNames(){const t=Object.keys(this.streamsMap).filter(t=>t===this.viewAccessInfo);let e={};return e[t]=[],this.streamsMap[t].forEach(s=>{let n=[];this.pushParentName(s,n,t,e),s.parents=n;let a=[];for(let t=0;t<n.length;t++)1===t&&2===n.length&&a.push("▸"),n.length>2&&(1===t?a.push("◾"):t>1&&a.push("▸"));a.length>0?s.icons=a.join(" "):s.icons=""}),this.streamsMap[t].map(t=>({value:`${t.icons} ${t.name} [${t.id}]`,text:t.parents.join("▸")}))}},methods:{pushParentName(t,e,s,n){if(t.parentId){var a=this.streamsMap[s].filter(e=>t.parentId===e.id);e.unshift(a[0].name),this.pushParentName(a[0],e,s,n)}else n[s].push(t)},isJSON:function(t){try{JSON.parse(t),this.clientData=t,this.okDisable=!1}catch(e){this.okDisable=!0}""===t&&(this.clientData=null,this.okDisable=!1)},checkFormValidity(){const t=this.$refs.form.checkValidity();return this.selectedName||(this.nameState=t),t},handleOk(t){t.preventDefault(),this.handleSubmit()},async handleSubmit(){this.checkFormValidity()&&await this.addStream()},setName(t){this.selectedName=t,this.nameState=null},async addStream(){const t=this.connectionsMap[this.viewAccessInfo];try{const e=d["a"].CREATE_STREAM_API;e[0].params={name:this.selectedName},null!==this.selectedId&&(e[0].params["id"]=this.selectedId),null!==this.selectedParentId&&(e[0].params["parentId"]=this.selectedParentId.split(" ").slice(-1)[0].replace(/[[\]]/g,"")),null!==this.clientData&&(e[0].params["clientData"]=JSON.parse(this.clientData));const s=await t.api(e);s&&s[0]&&s[0].error?(alert(s[0].error.id+" - "+s[0].error.message),this.resetModal()):await this.addStreamsToStore(s[0].stream)}catch(e){console.log("Error occurred when creating modals"+e)}},async addStreamsToStore(t){const e=Object.assign({},this.streamsMap);e[this.viewAccessInfo].push(t),this.addChild(e,t),this.streamsMap=e,this.$bvModal.hide("modal-scoped-stream"),this.resetModal()},addChild(t,e){if(null===e.parentId)return;const s=this.getParentIndex(t,e),n=this.getParent(t,s);n.children||(t[this.viewAccessInfo][s].children=[]),t[this.viewAccessInfo][s].children.push(e)},getParent(t,e){return e>=0?t[this.viewAccessInfo][e]:null},getParentIndex(t,e){return t[this.viewAccessInfo].findIndex(t=>t.id===e.parentId)},resetModal(){this.selectedName=null,this.selectedParentId=null,this.selectedId=null,this.clientData=null,this.nameState=null}}},h=p,m=s("2877"),f=Object(m["a"])(h,c,u,!1,null,null,null),b=f.exports,v={name:"Info",computed:{...Object(i["b"])(["viewAccessInfo"]),connectionsMap:{get(){return this.$store.state.connectionsMap},set(t){this.$store.commit("DELETE_CONNECTIONS_MAP",t)}},streamsMap:{get(){return this.$store.state.streamsMap},set(t){this.$store.commit("DELETE_STREAMS_MAP",t)}},accessInfoMap:{get(){return this.$store.state.accessInfoMap},set(t){this.$store.commit("DELETE_ACCESS_INFO_MAP",t)}},eventsMap:{get(){return this.$store.state.eventsMap},set(t){this.$store.commit("DELETE_EVENTS_MAP",t)}},infoJSON:{get:function(){return Object.keys(this.accessInfoMap).filter(t=>t===this.viewAccessInfo).reduce((t,e)=>(t[e]=this.accessInfoMap[e],t),{})}}},components:{AddStreamModal:b,PryvBtn:l["a"],VueJsonPretty:o.a},methods:{currentRouteName(){return this.$route.name},backToEvents(){"events"!==this.currentRouteName&&this.$router.push("events")},deleteConnectionData(){const t=Object.assign({},this.connectionsMap);delete t[this.viewAccessInfo],this.connectionsMap=t;const e=Object.assign({},this.accessInfoMap);delete e[this.viewAccessInfo],this.accessInfoMap=e;const s=Object.assign({},this.streamsMap);delete s[this.viewAccessInfo],this.streamsMap=s;const n=Object.assign({},this.eventsMap);delete n[this.viewAccessInfo],this.eventsMap=n,0===Object.keys(this.connectionsMap).length?this.$router.push("login"):this.$router.push("events")},logout(){let t=JSON.parse(this.$sessionStorage.endpoint_arr);const e=t.find(t=>t.key===this.viewAccessInfo);e.cookie&&this.$cookies.remove("pryv-libjs-web-app-explorer",window.location.pathname,"."+window.location.hostname),t=t.filter(t=>t.key!==this.viewAccessInfo),this.$sessionStorage.endpoint_arr=JSON.stringify(t),this.deleteConnectionData()}}},y=v,g=(s("5cd0"),Object(m["a"])(y,n,a,!1,null,"10c2f9c0",null));e["default"]=g.exports},2576:function(t,e,s){},"264a":function(t,e,s){"use strict";var n=s("1c99"),a=s.n(n);a.a},"2a21":function(t,e,s){"use strict";var n=s("2576"),a=s.n(n);a.a},4135:function(t,e,s){},4628:function(t,e,s){},"4ab9":function(t,e,s){},"5cd0":function(t,e,s){"use strict";var n=s("e8aa"),a=s.n(n);a.a},"5d30":function(t,e,s){"use strict";var n=s("de26"),a=s.n(n);a.a},6025:function(t,e,s){"use strict";var n=function(t,e){var s=e._c;return s("b-alert",{attrs:{show:e.props.show,variant:"danger"}},[e._v(e._s(e.props.message)+" ")])},a=[],i={name:"PryvAlert"},r=i,o=(s("b162"),s("2877")),l=Object(o["a"])(r,n,a,!0,null,"422f6d84",null);e["a"]=l.exports},"61be":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABmJLR0QA/wD/AP+gvaeTAAAB30lEQVRIia3Wv2sUQRjG8c/dRUQbRawVogYUjHp97LUQFMTO/AliGXKEJApaKFgKEkgsxMYfWNgIFoJFRKNRLGyvE5MyYHGixdyR2WF3cuvlhYHded95v/vOPvPuNoxuLVzFZUygh3U8xrtdyE8/8Vf8rRgr2DsqpI3NDGQwlqExAuQNDkVzH/FSqGAaRyLf+f+FpJXcEd7VwA6jG/kf7QZkviJ2MYpZbdaAHMAVYXu+9OcWMqA/0XWrImYoO5XxjWHNdkVPxoZI2MBFXBLk/Fs4JyuZNbdxLrp/sRPkGD4ol22vnzDd/rkkbq0kpmBtbFRA4nE9WtNJfBs4vhMkVdc67glS3Yrmb/TXzCbxm4rbNxRkUVE548KJv499mCmp5GxdyAz244EggPEovoVbSfwvnKkLme37bkZzW1jqV/OtBDKZg0yUQDqRfzrxlY2fOJ2DtIQXHS+aS2KagpR7FZD3OJqDwLVk0d1M7Emhgb7GWzzEBUN+BZ5GkE/yfSnXdrLWxIno/pViM4xtHt+FhrokVH6wDmzVdkULGUh6GNt1IISTPkjQFT5aA2sJTz4yBKaSRF3hEHYUW/1IkIEtK5ftrkIIPxQ52GdF0dS2VP9TQheYxB78wHM8U63GoewfAo7YbZrQf6sAAAAASUVORK5CYII="},7057:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white shadow h-100 w-100 d-flex justify-content-center"},[s("div",{staticClass:"bg-white py-2 w-90"},[s("div",{staticClass:"card-style info-card"},[s("b-row",[s("b-col",{attrs:{cols:"10"}},[s("h4",[t._v("Stream Info Panel - "+t._s(t.viewStreamInfo.id))])]),s("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[t.viewStreamInfoObj?s("PryvBtn",{staticClass:"mt-0",attrs:{icon:"arrow-left",content:"Back"},on:{click:t.backToEvents}}):t._e()],1)],1)],1),s("div",[t.computedStreamInfo?s("b-card",{staticClass:"text-info"},[s("b-row",{staticClass:"float-right mr-2"},[t.computedStreamInfo.trashed&&!0===t.computedStreamInfo.trashed&&!1===t.editable?s("b-icon",{attrs:{icon:"trash-fill","font-scale":"3"}}):t._e()],1),!1===t.editable?s("vue-json-pretty",{attrs:{path:"res",data:t.computedStreamInfo}}):s("v-jsoneditor",{attrs:{plus:!1,height:"500px",options:{enableTransform:!1,enableSort:!1,statusBar:!1,mainMenuBar:!0,search:!1,navigationBar:!1,mode:"code",onChangeText:function(e){t.isJSON(e)}}},model:{value:t.computedStreamInfo,callback:function(e){t.computedStreamInfo=e},expression:"computedStreamInfo"}}),!0===t.editable?s("b-row",{staticClass:"justify-content-center"},[s("PryvBtn",{staticClass:"mt-0",attrs:{content:"Cancel"},on:{click:t.cancelEdit}}),s("span",{staticClass:"w-3"}),s("PryvBtn",{staticClass:"mt-0",attrs:{content:"Save",disabled:t.saveDisable},on:{click:t.save}})],1):s("b-row",{staticClass:"justify-content-center"},[s("PryvBtn",{staticClass:"mt-0",attrs:{content:"Edit",icon:"check2-square"},on:{click:t.edit}}),s("span",{staticClass:"w-3"}),s("PryvBtn",{staticClass:"mt-0",attrs:{content:"Delete",icon:"trash-fill"},on:{click:function(e){t.viewStreamInfoObj.trashed&&!0===t.viewStreamInfoObj.trashed?t.$bvModal.show(t.viewStreamInfoObj.id):t.deleteStream()}}})],1)],1):s("b-card",{staticClass:"text-info"},[t._v(" Please select an endpoint to view the access data ")])],1),s("b-modal",{ref:"modal",attrs:{id:this.viewStreamInfoObj.id},scopedSlots:t._u([{key:"modal-header",fn:function(){return[s("h5",[t._v("Delete a stream")])]},proxy:!0},{key:"default",fn:function(){return[s("b-form-checkbox",{attrs:{id:"checkbox-1",name:"checkbox-1",value:"accepted","unchecked-value":"not_accepted"},model:{value:t.merge,callback:function(e){t.merge=e},expression:"merge"}},[t._v(" Merge events with parents ")])]},proxy:!0},{key:"modal-footer",fn:function(e){e.ok;var n=e.cancel;return[s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"Delete",icon:"trash-fill",type:"submit",variant:"success"},on:{click:t.deleteStream}}),s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"Cancel",icon:"x"},on:{click:n}})]}}])}),s("LoadStreamsForConnection",{ref:"reloadStreams",staticClass:"invisible",attrs:{merge:t.merge}})],1)])},a=[],i=s("2f62"),r=s("d538"),o=s.n(r),l=s("b707"),c=s("bcb2"),u=s.n(c),d=s("b8fc"),p=s("aa51"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("PryvBtn",{attrs:{icon:"arrow-clockwise",content:" streams",id:"submitBtn"},on:{click:t.loadStreams}})},m=[],f={name:"LoadStreamsForConnection",components:{PryvBtn:l["a"]},props:{merge:{type:String,default:"not_accepted"}},computed:{...Object(i["b"])(["viewStreamInfo"]),...Object(i["b"])(["connectionsMap"]),streamsMap:{get(){return this.$store.state.streamsMap},set(t){this.$store.commit("UPDATE_STREAMS_MAP",t)}},eventsMap:{get(){return this.$store.state.eventsMap},set(t){this.$store.commit("UPDATE_EVENTS_MAP",t)}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set(t){this.$store.commit("UPDATE_DISPLAY_EVENTS_MAP",t)}}},methods:{loadStreams(){const t=this.viewStreamInfo.endpoint,e=this.connectionsMap[t];e&&this.addStreamsToStore(e)&&("accepted"===this.merge&&(this.addInitialEventsToStore(e),this.addEventsToStore(e)),"Login"===this.currentRouteName()&&this.$router.push("events"))},currentRouteName(){return this.$route.name},async addStreamsToStore(t){const e=d["a"].GET_STREAMS_API;e[0].params={state:"all"};try{const s=await t.api(e);if(s){const e=[];s[0].streams.forEach(s=>{this.addStream(t.apiEndpoint,s,e)});const n=Object.assign({},this.streamsMap);n[t.apiEndpoint]=e,this.streamsMap=n}}catch(s){return console.log("Error occurred when retrieving streams "+s),!1}return!0},async addStream(t,e,s){e.children&&0===e.children.length&&s.push(e),e.children&&e.children.length>0&&(s.push(e),e.children.forEach(e=>this.addStream(t,e,s)))},async addInitialEventsToStore(t){this.displayEvents=[],this.typesSet=new Set;const e=d["a"].GET_EVENTS_API;e[0].params={};try{const s=await t.api(e);if(this.modifiedSinceMap=[t.apiEndpoint,Date.now()/1e3],s){s[0].events.forEach(t=>{this.forEachDisplayEvent(t)}),this.types=this.typesSet;const e=Object.assign({},this.selectedStreamsMap);e[t.apiEndpoint]=this.displayEvents,this.eventsDisplayMap=e}}catch(s){return console.log("Error occurred when retrieving streams "+s),!1}return!0},async addEventsToStore(t){this.events=[];let e={limit:1e6};try{const s=await t.getEventsStreamed(e,this.forEachEvent);this.modifiedSinceMap=[t.apiEndpoint,s.meta.serverTime],this.eventsMap[t.apiEndpoint]=this.events}catch(s){return console.log("Error occurred when retrieving events "+s),!1}return!0},forEachEvent(t){this.events.push(t)},forEachDisplayEvent(t){this.displayEvents.push(t),this.typesSet.add(t.type)}}},b=f,v=s("2877"),y=Object(v["a"])(b,h,m,!1,null,null,null),g=y.exports,S={name:"Stream",components:{LoadStreamsForConnection:g,PryvBtn:l["a"],VueJsonPretty:o.a,VJsoneditor:u.a},data(){return{editable:!1,updatedStreamInfo:null,merge:"not_accepted",saveDisable:!0}},computed:{...Object(i["b"])(["viewStreamInfo"]),...Object(i["b"])(["viewStreamInfoObj"]),...Object(i["b"])(["connectionsMap"]),viewStreamInfoObj:{get(){return this.reset(),this.$store.state.viewStreamInfoObj},set(t){this.$store.commit("UPDATE_STREAM_INFO_OBJ",t)}},streamsMap:{get(){return this.$store.state.streamsMap},set(t){this.$store.commit("UPDATE_STREAMS_MAP",t)}},computedStreamInfo:{get(){return null!==this.updatedStreamInfo?this.updatedStreamInfo:this.$store.state.viewStreamInfoObj},set(t){this.updatedStreamInfo=t}}},methods:{isJSON:function(t){try{JSON.parse(t),this.saveDisable=!1}catch(e){this.saveDisable=!0}},currentRouteName(){return this.$route.name},backToEvents(){"events"!==this.currentRouteName&&this.$router.push("events")},edit(){this.editable=!this.editable},getUpdatedProps(){const t={};return Object.keys(this.viewStreamInfoObj).forEach(e=>{e in this.computedStreamInfo&&this.viewStreamInfoObj[e]!==this.computedStreamInfo[e]&&("object"===typeof this.viewStreamInfoObj[e]&&"children"!==e?JSON.stringify(this.viewStreamInfoObj[e])!==JSON.stringify(this.computedStreamInfo[e])&&(t[e]=this.computedStreamInfo[e]):"children"!==e&&(t[e]=this.computedStreamInfo[e]))}),t},async save(){const t=this.getUpdatedProps();if(0===Object.keys(t).length)return void alert("No changes for the existing stream is detected. Note : Child streams are not editable");const e=this.viewStreamInfo.endpoint,s=this.connectionsMap[e];try{const n=d["a"].UPDATE_STREAM_API;n[0].params={id:this.viewStreamInfoObj.id,update:t};const a=await s.api(n);await this.addStreamsToStore(e,a[0].stream,p["a"].EDIT),a&&a[0]&&a[0].error&&alert(a[0].error.id+" - "+a[0].error.message)}catch(n){console.log("Error occurred when creating events"+n)}},async addStreamsToStore(t,e,s){this.viewStreamInfoObj.children&&(e.children=this.viewStreamInfoObj.children);const n=Object.assign({},this.streamsMap),a=n[this.viewStreamInfo.endpoint].findIndex(t=>t.id===this.viewStreamInfo.id);if(p["a"].EDIT===s){const s=n[t][a];s.parentId!==e.parentId?(this.addChild(n,e),this.removeChild(n,s)):this.updateChild(n,e)}else p["a"].DELETE===s&&this.updateChild(n,e);n[t][a]=e,this.viewStreamInfoObj=e,this.streamsMap=n,this.saveDisable=!0,this.editable=!1},getParent(t,e){return e>=0?t[this.viewStreamInfo.endpoint][e]:null},removeChild(t,e){if(null===e.parentId)return;const s=this.getParentIndex(t,e),n=this.getParent(t,s);if(null!==n){let a=Object.assign({},n);a.children=n.children.filter(t=>t.id!==e.id),t[this.viewStreamInfo.endpoint][s]=a}},addChild(t,e){if(null===e.parentId)return;const s=this.getParentIndex(t,e),n=this.getParent(t,s);if(n.children){let a=Object.assign({},n);a.children.push(e),t[this.viewStreamInfo.endpoint][s]=a}},updateChild(t,e){if(null===e.parentId)return;const s=this.getParentIndex(t,e),n=this.getParent(t,s);if(n.children){let a=n.children.findIndex(t=>t.id===e.id);t[this.viewStreamInfo.endpoint][s].children[a]=e}},getParentIndex(t,e){const s=t[this.viewStreamInfo.endpoint].findIndex(t=>t.id===e.parentId);return s},reset(){Object.assign(this.$data,this.$options.data.call(this))},async deleteStream(){const t=this.viewStreamInfo.endpoint,e=this.connectionsMap[t];try{const s=d["a"].DELETE_STREAM_API;s[0].params={id:this.viewStreamInfoObj.id,mergeEventsWithParent:"accepted"===this.merge};const n=await e.api(s);if(n&&n[0]&&n[0].stream){const e=n[0].stream;await this.addStreamsToStore(t,e,p["a"].DELETE),e.children=this.viewStreamInfoObj.children,this.viewStreamInfoObj=e}n&&n[0]&&n[0].streamDeletion&&(this.$refs.reloadStreams.$el.click(),this.$bvModal.hide(n[0].streamDeletion.id),this.backToEvents()),n&&n[0]&&n[0].error&&alert(n[0].error.id+" - "+n[0].error.message)}catch(s){console.log("Error occurred when creating modals"+s)}},cancelEdit(){this.editable=!this.editable,this.updatedStreamInfo=null}}},C=S,E=(s("2a21"),Object(v["a"])(C,n,a,!1,null,null,null));e["default"]=E.exports},a067:function(t,e,s){"use strict";var n=s("a943"),a=s.n(n);a.a},a19e:function(t,e,s){},a55b:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white shadow h-100 w-100 d-flex justify-content-center"},[s("div",{staticClass:"bg-white py-2 w-90"},[s("div",{staticClass:"card-style login-card"},[s("b-row",[s("b-col",{attrs:{cols:"10"}},[s("h4",[t._v("Login Panel")])]),s("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[t.showBtn?s("PryvBtn",{staticClass:"mt-0",attrs:{content:"Back",icon:"arrow-left"},on:{click:t.backToEvents}}):t._e()],1)],1)],1),s("div",[s("b-card",{attrs:{"no-body":""}},[s("b-tabs",{attrs:{"content-class":"mt-3",fill:""}},[s("b-tab",{attrs:{title:"Token Based Login",active:""}},[s("b-card-text",[s("b-card",{staticClass:"card-style shadow min-height-card"},[s("PryvLabel",{attrs:{href:"https://github.com/pryv/lib-js#within-a-webpage-with-a-login-button",parentData:"Login using Web Button"}}),s("WebButton",{key:t.serviceInfoMap.web,on:{authenticated:t.updateSessionStorage}}),s("br"),s("div",{staticClass:"text-left"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],staticClass:"pryv-btn-collapse",attrs:{variant:"secondary"}},[t._v("View Service Info ")]),s("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"}},[s("b-card",{staticClass:"card-style border-0"},[s("PryvLabel",{attrs:{href:"https://github.com/pryv/lib-js#usage-of-pryvservice",parentData:"Service Info URL"}}),s("ServiceInfo",{attrs:{id:"web_login"}})],1)],1)],1)],1)],1)],1),s("b-tab",{attrs:{title:"Username, Password Login"}},[s("b-card-text",[s("b-card",{staticClass:"card-style shadow"},[s("PryvLabel",{attrs:{href:"https://github.com/pryv/lib-js#using-servicelogin-trusted-apps-only",parentData:"Login using Username, Password"}}),s("UsernameLogin",{on:{authenticated:t.updateSessionStorage}}),s("br"),s("div",{staticStyle:{"text-align":"left"}},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapse-2",expression:"'collapse-2'"}],staticClass:"pryv-btn-collapse",attrs:{variant:"secondary"}},[t._v("View Service Info ")]),s("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-2"}},[s("b-card",{staticClass:"card-style shadow border-0"},[s("PryvLabel",{attrs:{href:"https://github.com/pryv/lib-js#usage-of-pryvservice",parentData:"Service Info URL"}}),s("ServiceInfo",{attrs:{id:"manual_login"}})],1)],1)],1)],1)],1)],1),s("b-tab",{attrs:{title:"API Endpoint Login"}},[s("b-card-text",[s("b-card",{staticClass:"card-style shadow"},[s("PryvLabel",{attrs:{href:"https://github.com/pryv/lib-js#using-an-api-endpoint",parentData:"Login Using API"}}),s("APILogin",{on:{authenticated:t.updateSessionStorage}})],1)],1)],1)],1),s("b-overlay",{attrs:{show:t.showOverlay,"no-wrap":""}})],1)],1)])])},a=[],i=s("b707"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("PryvAlert",{attrs:{message:t.alertMessage,show:t.show}})],1),s("div",[s("b-form",{staticClass:"text-right",on:{submit:function(t){t.preventDefault()}}},[s("div",{staticClass:"mb-4 mb-sm-0 text-right"},[s("PryvInput",{attrs:{id:"inline-form-input-endpoint",placeholder:"Enter API Endpoint",required:""},on:{textInput:t.updateEndpoint},model:{value:t.apiEndpoint,callback:function(e){t.apiEndpoint=e},expression:"apiEndpoint"}})],1),s("PryvBtn",{attrs:{content:"Login",type:"submit"},on:{click:t.loginAPI}})],1)],1)])},o=[],l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-input",{staticClass:"pryv-input",attrs:{id:t.id,placeholder:t.placeholder,value:t.value,type:t.type,disabled:t.disabled,required:t.required},on:{input:function(e){return t.$emit("textInput",e)}}})},c=[],u={name:"PryvInput",props:{value:{type:String,default:""},placeholder:{type:String},id:{type:String},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},type:{type:String,default:"text"}}},d=u,p=(s("264a"),s("2877")),h=Object(p["a"])(d,l,c,!1,null,"b2753868",null),m=h.exports,f=s("6025"),b={name:"APILogin",components:{PryvInput:m,PryvBtn:i["a"],PryvAlert:f["a"]},data(){return{apiEndpoint:"",placeHolder:"",show:!1,alertMessage:""}},methods:{loginAPI:async function(){try{const t=new this.$pryv.Connection(this.apiEndpoint);t?this.$emit("authenticated",t,!1):console.log("Please enter a valid endpoint.")}catch(t){this.show=!0,this.alertMessage=t.message,this.apiEndpoint=""}},updateEndpoint(t){this.apiEndpoint=t,this.apiEndpoint&&this.show&&(this.show=!1,this.alertMessage="")}}},v=b,y=Object(p["a"])(v,r,o,!1,null,null,null),g=y.exports,S=function(t,e){var n=e._c;return n("b-row",[n("b-col",{staticClass:"p-0",attrs:{cols:"1"}},[e.props.href?n("a",{attrs:{target:"_blank",href:e.props.href}},[n("b-img",{attrs:{src:s("61be"),width:"10px"}})],1):e._e()]),n("b-col",{staticClass:"text-left p-0",attrs:{cols:"11"}},[n("h5",{staticClass:"pryv-label pl-3 mb-2",domProps:{textContent:e._s(e.props.parentData)}})])],1)},C=[],E={name:"PryvLabel"},k=E,T=(s("a067"),Object(p["a"])(k,S,C,!0,null,"6d2bff1b",null)),_=T.exports,w=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},O=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-left"},[s("span",{attrs:{id:"pryv-button"}}),s("br")])}],x=s("d4bf"),M=s.n(x),j=s("2f62"),I={name:"WebButton",computed:{...Object(j["b"])(["serviceInfoMap"])},async mounted(){await this.loadButton()},methods:{async loadButton(){await M.a.Browser.setupAuth(A.call(this),this.serviceInfoMap["web"])}}};async function D(t){let e=null;t.id===M.a.Browser.AuthStates.AUTHORIZED&&(e=new M.a.Connection(t.apiEndpoint),e?this.$emit("authenticated",e,!0):console.log("Error with Web Login")),t.id===M.a.Browser.AuthStates.INITIALIZED&&(e=null)}function A(){return{spanButtonID:"pryv-button",onStateChange:D.bind(this),authRequest:{requestingAppId:"web-app-explorer",requestedPermissions:[{streamId:"*",level:"manage"}],clientData:{"app-web-auth:description":{type:"note/txt",content:"This is a consent message."}}}}}var P=I,N=Object(p["a"])(P,w,O,!1,null,null,null),F=N.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("PryvAlert",{attrs:{show:t.show,message:t.message}})],1),s("div",[s("b-form",{ref:"form",attrs:{inline:""},on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("label",{staticClass:"sr-only",attrs:{for:"inline-form-input-username"}},[t._v("Username")]),s("b-input-group",{staticClass:"input-group-width mb-4 mr-sm-2 mb-sm-0"},[s("PryvInput",{attrs:{id:"inline-form-input-username",placeholder:"Enter username",required:""},on:{textInput:t.updateUsername},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),s("label",{staticClass:"sr-only",attrs:{for:"inline-form-input-password"}},[t._v("Password")]),s("b-input-group",{staticClass:"input-group-width mb-4 mb-sm-0 w-40 float-right"},[s("PryvPassword",{attrs:{id:"inline-form-input-password",placeholder:"Enter password"},on:{passwordInput:t.updatePassword},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("PryvBtn",{attrs:{content:"Login",type:"submit",id:"submitBtn"},on:{click:t.login}})],1)],1)])},L=[],B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-form-input",{staticClass:"pryv-input",attrs:{id:t.id,placeholder:t.placeholder,value:t.value,type:"password",disabled:t.disabled,required:"",autocomplete:"on"},on:{input:function(e){return t.$emit("passwordInput",e)}}})},R=[],q={name:"PryvPassword",props:{value:{type:String,default:""},placeholder:{type:String},id:{type:String},disabled:{type:Boolean,default:!1}}},U=q,V=(s("1d53"),Object(p["a"])(U,B,R,!1,null,"63cabb92",null)),Y=V.exports,J={name:"UsernameLogin",components:{PryvAlert:f["a"],PryvPassword:Y,PryvBtn:i["a"],PryvInput:m},data(){return{username:"",password:"",show:!1,message:""}},computed:{...Object(j["b"])(["serviceInfoMap"])},methods:{async login(){const t=this.serviceInfoMap["manual"],e="web-app-explorer",s=new this.$pryv.Service(t);try{const t=await s.login(this.username,this.password,e);t?this.$emit("authenticated",t,!1):(this.show=!0,this.message="login credentials are not correct.",this.username="",this.password="",console.log("Invalid login credentials."))}catch(n){this.show=!0,this.message=n.message,this.username="",this.password="",console.log(n.message)}},updateUsername(t){this.username=t,this.username&&this.show&&(this.show=!1,this.message="")},updatePassword(t){this.password=t,this.password&&this.show&&(this.show=!1,this.message="")}}},K=J,G=(s("b1aa"),Object(p["a"])(K,$,L,!1,null,"049def2c",null)),z=G.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-form",[s("b-input-group",{staticClass:"mb-4 mr-sm-4 mb-sm-0"},[s("b-input",{ref:"serviceInfo",attrs:{id:t.id,placeholder:"Enter Service Endpoint",value:t.serviceInfoUrl},on:{input:t.setServiceInfo}})],1),s("PryvBtn",{attrs:{icon:"arrow-clockwise",content:"Fetch Service Info"},on:{click:t.fetchServiceInfo}})],1),s("div",{staticClass:"pt-2"},[s("h6",{staticClass:"text-left default-font"},[t._v(t._s(t.ServiceInfoLabel))]),s("div",{staticClass:"service-info-container"},[s("div",{staticClass:"text-left default-font"},[t._v(' "register": '+t._s(t.register)+" "),s("br"),t._v(' "access": '+t._s(t.access)+" "),s("br"),t._v(' "api": '+t._s(t.api)+" "),s("br"),t._v(' "name": '+t._s(t.name)+" "),s("br"),t._v(' "home": '+t._s(t.home)+" "),s("br"),t._v(' "support": '+t._s(t.support)+" "),s("br"),t._v(' "terms": '+t._s(t.terms)+" "),s("br"),t._v(' "eventTypes": '+t._s(t.eventTypes)),s("br"),t._v(' "assets": '+t._s(t.assets)),s("br")])])])],1)},H=[],Q=s("aa51"),Z={name:"APILogin",components:{PryvBtn:i["a"]},computed:{serviceInfoMap:{get(){return this.$store.state.serviceInfoMap},set(t){this.$store.commit("UPDATE_SERVICE_INFO_MAP",t)}}},data(){return{serviceInfoUrl:"manual_login"===this.id?this.$store.state.serviceInfoMap["manual"]:this.$store.state.serviceInfoMap["web"],ServiceInfoLabel:"Service Info",register:"",access:"",api:"",name:"",home:"",support:"",terms:"",eventTypes:"",assets:""}},props:{id:{type:String}},async created(){let t=null,e=null;this.$route.query&&this.$route.query.pryvServiceInfoUrl&&(this.serviceInfoUrl=this.$route.query.pryvServiceInfoUrl);try{t=new this.$pryv.Service(this.serviceInfoUrl),e=await t.info()}catch(s){this.serviceInfoUrl=Q["a"].DEFAULT_SERVICE_INFO_URL,this.$route.query.pryvServiceInfoUrl=this.serviceInfoUrl,t=new this.$pryv.Service(this.serviceInfoUrl),e=await t.info()}finally{"manual_login"===this.id?this.serviceInfoMap.manual=this.serviceInfoUrl:"web_login"===this.id&&(this.serviceInfoMap.web=this.serviceInfoUrl),this.register=e.register,this.access=e.access,this.api=e.api,this.name=e.name,this.home=e.home,this.support=e.support,this.terms=e.terms,this.eventTypes=e.eventTypes,this.assets=e.assets}},methods:{setServiceInfo(t){this.serviceInfoUrl=t},async fetchServiceInfo(){let t=null,e=null;try{t=new this.$pryv.Service(this.serviceInfoUrl),e=await t.info()}catch(s){this.serviceInfoUrl=Q["a"].DEFAULT_SERVICE_INFO_URL,t=new this.$pryv.Service(this.serviceInfoUrl),e=await t.info()}finally{"manual_login"===this.id?this.serviceInfoMap.manual=this.serviceInfoUrl:"web_login"===this.id&&(this.serviceInfoMap.web=this.serviceInfoUrl),console.log("fianall service info"),console.log(this.serviceInfo),this.register=e.register,this.access=e.access,this.api=e.api,this.name=e.name,this.home=e.home,this.support=e.support,this.terms=e.terms,this.eventTypes=e.eventTypes,this.assets=e.assets}}}},X=Z,tt=(s("c189"),Object(p["a"])(X,W,H,!1,null,"e7777dd4",null)),et=tt.exports,st=s("b8fc"),nt={components:{ServiceInfo:et,UsernameLogin:z,WebButton:F,PryvLabel:_,APILogin:g,PryvBtn:i["a"]},computed:{...Object(j["b"])(["serviceInfoMap"]),connectionsMap:{get(){return this.$store.state.connectionsMap},set([t,e]){this.connectionsMap[t]||this.$store.commit("ADD_CONNECTIONS_MAP",[t,e])}},streamsMap:{get(){return this.$store.state.streamsMap},set([t,e]){let s=[];s=this.streamsMap[t]?this.streamsMap[t]:[],s.push(e),this.$store.commit("ADD_STREAMS_MAP",[t,s])}},accessInfoMap:{get(){return this.$store.state.accessInfoMap},set([t,e]){this.accessInfoMap[t]||this.$store.commit("ADD_ACCESS_INFO_MAP",[t,e])}},eventsMap:{get(){return this.$store.state.eventsMap},set([t,e]){this.$store.commit("ADD_EVENTS_MAP",[t,e])}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set([t,e]){this.$store.commit("ADD_DISPLAY_EVENTS_MAP",[t,e])}},modifiedSinceMap:{get(){return this.$store.state.modifiedSinceMap},set([t,e]){this.$store.commit("ADD_MODIFIED_SINCE_MAP",[t,e])}},types:{get(){return this.$store.state.types},set(t){this.$store.commit("SET_TYPES",t)}},showBtn:function(){return!!this.connectionsMap&&Object.keys(this.connectionsMap).length>0}},data(){return{events:[],displayEvents:[],typesSet:new Set,showOverlay:!1}},methods:{addAPIEndpointsToSessionStorage(t,e){let s=this.$sessionStorage.endpoint_arr;return s=s?JSON.parse(s):[],!(s.filter(e=>e.key===t.apiEndpoint).length>0)&&(s.push({key:t.apiEndpoint,cookie:e}),this.$sessionStorage.endpoint_arr=JSON.stringify(s),!0)},addConnectionToStore(t){return this.connectionsMap=[t.apiEndpoint,t],!0},async addStreamsToStore(t){const e=st["a"].GET_STREAMS_API;e[0].params={state:"all"};try{const s=await t.api(e);s&&s[0].streams.forEach(e=>{this.addStream(t.apiEndpoint,e)})}catch(s){return console.log("Error occurred when retrieving streams "+s),!1}return!0},async addInitialEventsToStore(t){this.displayEvents=[],this.typesSet=new Set;const e=st["a"].GET_EVENTS_API;e[0].params={};try{const s=await t.api(e);this.modifiedSinceMap=[t.apiEndpoint,Date.now()/1e3],s&&(s[0].events.forEach(t=>{this.forEachDisplayEvent(t)}),this.types=this.typesSet,this.eventsDisplayMap=[t.apiEndpoint,this.displayEvents])}catch(s){return console.log("Error occurred when retrieving streams "+s),!1}return!0},async addStream(t,e){e.children&&0===e.children.length&&(this.streamsMap=[t,e]),e.children&&e.children.length>0&&(this.streamsMap=[t,e],e.children.forEach(e=>this.addStream(t,e)))},async addAccessInfoToStore(t){try{const e=await t.api(st["a"].ACCESS_INFO_API);e&&(this.accessInfoMap=[t.apiEndpoint,e[0]])}catch(e){return console.log("Error occurred when retrieving access info "+e),!1}return!0},async addEventsToStore(t){this.events=[];let e={limit:1e6};try{const s=await t.getEventsStreamed(e,this.forEachEvent);this.modifiedSinceMap=[t.apiEndpoint,s.meta.serverTime],this.eventsMap=[t.apiEndpoint,this.events]}catch(s){return console.log("Error occurred when retrieving events "+s),!1}return!0},forEachEvent(t){this.events.push(t)},forEachDisplayEvent(t){this.displayEvents.push(t),this.typesSet.add(t.type)},async updateStore(t){this.showOverlay=!0;const e=await this.addConnectionToStore(t),s=await this.addStreamsToStore(t),n=await this.addAccessInfoToStore(t),a=await this.addInitialEventsToStore(t);return!!(e&&s&&n&&a)&&(this.showOverlay=!1,!0)},async updateSessionStorage(t,e){const s=await this.addAPIEndpointsToSessionStorage(t,e);!0===s&&await this.updateStore(t).then(async function(e){e&&this.$router.push("events"),this.addEventsToStore(t)}.bind(this)).catch((function(t){alert(t)}))},currentRouteName(){return this.$route.name},backToEvents(){"events"!==this.currentRouteName&&this.$router.push("events")}}},at=nt,it=(s("d6db"),Object(p["a"])(at,n,a,!1,null,null,null));e["default"]=it.exports},a943:function(t,e,s){},aa9c:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white shadow h-100 w-100 d-flex justify-content-center"},[s("div",{staticClass:"bg-white py-2 w-90"},[s("div",{staticClass:"card-style events-card"},[s("b-row",[s("b-col",{attrs:{cols:"10"}},[s("h4",[t._v("Events Panel")])]),s("b-col",{staticClass:"px-0 float-right",attrs:{cols:"2"}},[s("LoadAllBtn",{staticClass:"mr-2"}),s("LoadEventsBtn")],1)],1)],1),s("FilterPanel"),s("br"),s("div",[s("b-card",{attrs:{"no-body":""}},[s("b-col",{staticClass:"pr-0",attrs:{cols:"2",offset:"10"}},[s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{id:"submitBtn",icon:"plus",content:"Event"},on:{click:function(e){return t.$bvModal.show("modal-scoped-event")}}})],1),s("AddEventModal"),s("b-tabs",{staticClass:"table-font",attrs:{card:""}},[s("b-tab",{attrs:{title:"TABLE VIEW",active:""}},[s("b-card-text",[s("div",[s("b-table",{attrs:{fields:t.fields,"sticky-header":"",responsive:"",striped:"",hover:"",items:t.fetchData},scopedSlots:t._u([{key:"cell(attachments)",fn:function(e){return[e.item.attachments&&e.item.attachments.length>0?s("div",[s("a",{attrs:{target:"_blank",href:"https://"+e.item.endpoint+"events/"+e.item.id+"/"+e.item.attachments[0].id+"?readToken="+e.item.attachments[0].readToken}},[t._v(t._s(e.item.attachments[0].id))]),s("div",[t._v("Click to view the attachment")])]):s("p",[t._v("No Attachments")])]}},{key:"cell(edit)",fn:function(e){return[s("PryvBtn",{staticClass:"mt-0 mr-5",attrs:{icon:"check2-square"},on:{click:function(s){return t.$bvModal.show(e.item.id)}}}),s("EditEventModal",{attrs:{data:e.item,apiEndpoint:e.item.apiEndpoint,id:e.item.id}})]}},{key:"cell(content)",fn:function(e){return[e.item.content&&e.item.type.includes("series")?s("div",[t._v(" "+t._s(e.item.content.fields)+" "),s("a",{attrs:{href:"#"},on:{click:function(s){return t.openJSON(e.item.endpoint,e.item.id,e.item.token)}}},[t._v(" Click here to view data")])]):s("div",[t._v(t._s(e.item.content))])]}}])}),0===t.fetchData.length?s("PryvAlert",{attrs:{show:t.show,message:t.message}}):t._e()],1)])],1),this.limit<500?s("b-tab",{attrs:{title:"JSON VIEW"}},[s("b-card-text",{staticClass:"text-left"},[s("vue-json-pretty",{attrs:{data:this.displayJSON}}),0===t.fetchData.length?s("PryvAlert",{attrs:{show:t.show,message:t.message}}):t._e()],1)],1):t._e()],1),s("b-overlay",{attrs:{show:t.showOverlay,"no-wrap":""}})],1)],1)],1)])},a=[],i=s("2f62"),r=s("d538"),o=s.n(r),l=s("6025"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",[t.tags.length>0?s("b-form-tags",{staticClass:"mb-2 text-left",attrs:{"no-outer-focus":""},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}},[s("ul",{staticClass:"list-unstyled d-inline-flex flex-wrap mb-0",attrs:{id:"my-custom-tags-list","aria-live":"polite","aria-atomic":"false","aria-relevant":"additions removals"}},t._l(t.tags,(function(e){return s("b-card",{key:e,staticClass:"mt-1 mr-1",attrs:{tag:"li","body-class":"py-1 pr-2 text-nowrap"}},[s("strong",{staticClass:"default-font"},[t._v(t._s(e))])])})),1)]):t._e()],1),s("b-col",{staticClass:"px-0",attrs:{cols:"12"}},[s("b-col",{staticClass:"px-0",attrs:{cols:"1"}},[s("b-overlay",{staticClass:"d-inline-block",attrs:{show:t.busy,opacity:"0.6","spinner-small":"","spinner-variant":"primary"},on:{hidden:t.onHidden}},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],ref:"button",staticClass:"pryv-btn-style float-left",attrs:{variant:"danger"}},[t._v("Filters"),s("b-icon",{staticClass:"pl-1 pr-1 pt-2",attrs:{icon:"filter","font-scale":"2"}})],1)],1)],1)],1),s("b-col",{staticClass:"px-0",attrs:{cols:"12"}},[s("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"}},[s("br"),s("b-card",{staticClass:"p-3"},[s("b-row",[s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:t.fromLabel},on:{change:function(e){return t.clickCheckboxToDisableFilter(t.fromLabelToSort,e)}},model:{value:t.valueFromCheck,callback:function(e){t.valueFromCheck=e},expression:"valueFromCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("DatePicker",{attrs:{disabled:!1===this.valueFromCheck,value:t.valueFrom},on:{updateFilter:function(e){return t.selectFiltersRelatedToDates(t.fromLabelToSort,e)}}})],1)],1)],1),s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:t.toLabel},on:{change:function(e){return t.clickCheckboxToDisableFilter(t.toLabelToSort,e)}},model:{value:t.valueToCheck,callback:function(e){t.valueToCheck=e},expression:"valueToCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("DatePicker",{attrs:{disabled:!1===this.valueToCheck,value:t.valueTo},on:{updateFilter:function(e){return t.selectFiltersRelatedToDates(t.toLabelToSort,e)}}})],1)],1)],1),s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:t.modifiedSinceLabel},on:{change:function(e){return t.clickCheckboxToDisableFilter(t.modifiedSinceLabelToSort,e)}},model:{value:t.valueModifiedCheck,callback:function(e){t.valueModifiedCheck=e},expression:"valueModifiedCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("DatePicker",{attrs:{disabled:!1===this.valueModifiedCheck,value:t.valueModified},on:{updateFilter:function(e){return t.selectFiltersRelatedToDates(t.modifiedSinceLabelToSort,e)}}})],1)],1)],1)],1),s("b-row",[s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:t.stateLabel},on:{change:function(e){return t.clickCheckboxToDisableFilter(t.stateLabelToSort,e)}},model:{value:t.valueStateCheck,callback:function(e){t.valueStateCheck=e},expression:"valueStateCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("Dropbox",{attrs:{disabled:!1===this.valueStateCheck,options:t.optionsState,valueSelected:t.valueState},on:{input:function(e){return t.selectFilterStateOrSort(t.stateLabelToSort,e)}}})],1)],1)],1),s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:t.sortLabel},on:{change:function(e){return t.clickCheckboxToDisableFilter(t.sortLabelToSort,e)}},model:{value:t.valueSortCheck,callback:function(e){t.valueSortCheck=e},expression:"valueSortCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("Dropbox",{attrs:{disabled:!1===this.valueSortCheck,options:t.optionsSort,valueSelected:t.valueSort},on:{input:function(e){return t.selectFilterStateOrSort(t.sortLabelToSort,e)}}})],1)],1)],1),s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:t.limitLabel},on:{change:function(e){return t.clickCheckboxToDisableFilter(t.limitLabelToSort,e)}},model:{value:t.valueLimitCheck,callback:function(e){t.valueLimitCheck=e},expression:"valueLimitCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("b-form-input",{staticClass:"default-font",attrs:{disabled:!1===this.valueLimitCheck,placeholder:"Enter the limit",type:"text"},on:{input:t.selectFilterLimit},nativeOn:{keydown:function(e){return t.enter_limit_event(e)}},model:{value:t.valueLimit,callback:function(e){t.valueLimit=e},expression:"valueLimit"}})],1)],1)],1)],1),s("b-row",[s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:t.typeLabel},on:{change:function(e){return t.clickCheckboxToDisableFilter(t.typeLabelToSort,e)}},model:{value:t.valueTypeCheck,callback:function(e){t.valueTypeCheck=e},expression:"valueTypeCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("b-button",{staticClass:"default-font modify-btn",attrs:{disabled:!1===this.valueTypeCheck,id:"submitBtn"},on:{click:function(e){return t.$bvModal.show("modal-scoped")}}},[t._v("Modify Types ")])],1),s("TypesFilterModal",{attrs:{label:t.typesMessage,options:t.optionsTypes,title:t.modalTitle,value:t.selected},on:{clickCancel:t.cancelTypeFilters,clickOk:t.setTypeFilters,listChange:t.setSelected}})],1)],1),s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:t.runningLabel},on:{change:function(e){return t.selectFilterStateOrSort(t.runningLabelToSort,e)}},model:{value:t.valueRunning,callback:function(e){t.valueRunning=e},expression:"valueRunning"}})],1)],1)],1)],1)],1)],1)],1)],1)},u=[],d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[s("input",{attrs:{name:"checkbox-1",type:"checkbox"},domProps:{checked:t.checked},on:{change:function(e){return t.$emit("change",e.target.checked)}}}),s("label",{staticClass:"checkbox-label"},[t._v(" "+t._s(t.content)+" ")])])},p=[],h={name:"Checkbox",model:{prop:"checked",event:"change"},props:{content:{type:String},checked:{required:!0}}},m=h,f=(s("5d30"),s("2877")),b=Object(f["a"])(m,d,p,!1,null,null,null),v=b.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-form-select",{staticClass:"mb-3 dropbox-filter",attrs:{disabled:t.disabled,options:t.options,value:t.valueSelected},on:{input:function(e){return t.$emit("input",e)}}})},g=[],S={name:"Dropbox",props:{valueSelected:{required:!0},options:{required:!0},disabled:{required:!1,default:!1}}},C=S,E=Object(f["a"])(C,y,g,!1,null,null,null),k=E.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-input-group",{staticClass:"mb-3"},[s("b-form-input",{staticClass:"default-font",attrs:{value:t.value,type:"text",placeholder:"YYYY-MM-DD",autocomplete:"off",disabled:t.disabled}}),s("b-input-group-append",[s("b-form-datepicker",{attrs:{value:t.value,"button-only":"",right:"",locale:"en-US","aria-controls":"example-input",disabled:t.disabled},on:{context:function(e){return t.$emit("updateFilter",e)}}})],1)],1)},_=[],w={name:"DatePicker",props:{value:{required:!0},disabled:{required:!0}}},O=w,x=Object(f["a"])(O,T,_,!1,null,null,null),M=x.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-modal",{attrs:{id:"modal-scoped"},scopedSlots:t._u([{key:"modal-header",fn:function(){return[s("h5",[t._v(t._s(t.title))])]},proxy:!0},{key:"default",fn:function(){return[s("b-form-group",{attrs:{label:t.label}},[s("b-form-checkbox-group",{staticClass:"pl-4",attrs:{options:t.options,id:"checkbox-group-1",name:"flavour-1"},model:{value:t.valueLocal,callback:function(e){t.valueLocal=e},expression:"valueLocal"}})],1)]},proxy:!0},{key:"modal-footer",fn:function(e){var n=e.ok,a=e.cancel;return[s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"OK",icon:"check",type:"submit",variant:"success"},on:{click:function(e){return t.$emit("clickOk",n)}}}),s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"Cancel",icon:"x"},on:{click:function(e){return t.$emit("clickCancel",a)}}})]}}])})},I=[],D=s("b707"),A={name:"TypesFilterModal",components:{PryvBtn:D["a"]},props:{title:{required:!0,type:String},label:{required:!0},options:{required:!0},value:{required:!0}},computed:{valueLocal:{get:function(){return this.value},set:function(t){this.$emit("listChange",t)}}}},P=A,N=(s("f41c"),Object(f["a"])(P,j,I,!1,null,null,null)),F=N.exports,$=s("aa51"),L={name:"FilterPanel",components:{TypesFilterModal:F,DatePicker:M,Checkbox:v,Dropbox:k},computed:{...Object(i["b"])(["types"]),updatedFilters:{get(){return this.$store.state.selectedFilters},set(t){this.$store.commit("UPDATE_SELECTED_FILTERS",t)}},optionsTypes(){const t=[];for(let e of this.types){const s={text:e,value:e};t.push(s)}return t},typesMessage(){return this.types.size>0?"Select one or multiple types to filter":"You have selected no endpoints to view"}},data(){return{valueFrom:null,valueTo:null,valueRunning:!1,valueState:null,valueSort:null,valueModified:null,valueLimit:"",optionsState:[{value:null,text:"Select the state"},{value:$["d"].DEFAULT,text:"DEFAULT"},{value:$["d"].TRASHED,text:"TRASHED"},{value:$["d"].ALL,text:"ALL"}],optionsSort:[{value:null,text:"Select the sorting order"},{value:!0,text:"TRUE"},{value:!1,text:"FALSE"}],modalShow:!1,selected:[],fromLabel:$["b"].FROM,toLabel:$["b"].TO,stateLabel:$["b"].STATE,sortLabel:$["b"].SORT,modifiedSinceLabel:$["b"].MODIFIED_SINCE,limitLabel:$["b"].LIMIT,typeLabel:$["b"].TYPES,runningLabel:$["b"].RUNNING,fromLabelToSort:$["c"].FROM,toLabelToSort:$["c"].TO,stateLabelToSort:$["c"].STATE,sortLabelToSort:$["c"].SORT,modifiedSinceLabelToSort:$["c"].MODIFIED_SINCE,limitLabelToSort:$["c"].LIMIT,typeLabelToSort:$["c"].TYPES,runningLabelToSort:$["c"].RUNNING,valueFromCheck:!1,valueToCheck:!1,valueStateCheck:!1,valueSortCheck:!1,valueModifiedCheck:!1,valueLimitCheck:!1,valueTypeCheck:!1,modalTitle:"Select Types to Filter",tags:[],busy:!1}},methods:{onHidden(){this.$refs.button.focus()},enter_limit_event(t){13===t.which&&(this.busy=!0,setTimeout(async function(){""!==this.valueLimit?(this.tags=this.tags.filter(t=>!t.includes($["b"].LIMIT)),this.tags.push($["b"].LIMIT+" - "+this.valueLimit),this.updateSelectedFiltersArray($["c"].LIMIT,parseInt(this.valueLimit))):this.removeFromSelectedFiltersArray($["c"].LIMIT,this.tags=this.tags.filter(t=>!t.includes($["b"].LIMIT))),this.busy=!1}.bind(this),150))},setSelected(t){this.busy=!0,this.selected=t,this.selected?(this.tags=this.tags.filter(t=>!t.includes($["b"].TYPES)),this.tags.push($["b"].TYPES+" - "+t)):this.tags=this.tags.filter(t=>!t.includes($["b"].TYPES)),this.busy=!1},selectFiltersRelatedToDates(t,e){switch(this.busy=!0,e.selectedYMD?this.updateSelectedFiltersArray(t,Date.parse(e.selectedYMD)/1e3):this.removeFromSelectedFiltersArray(t),t){case $["c"].FROM:this.valueFrom=e.selectedYMD,this.valueFrom?(this.tags=this.tags.filter(t=>!t.includes($["b"].FROM)),this.tags.push($["b"].FROM+" - "+e.selectedYMD)):this.tags=this.tags.filter(t=>!t.includes($["b"].FROM));break;case $["c"].TO:this.valueTo=e.selectedYMD,this.valueTo?(this.tags=this.tags.filter(t=>!t.includes($["b"].TO)),this.tags.push($["b"].TO+" - "+e.selectedYMD)):this.tags=this.tags.filter(t=>!t.includes($["b"].TO));break;case $["c"].MODIFIED_SINCE:this.valueModified=e.selectedYMD,this.valueModified?(this.tags=this.tags.filter(t=>!t.includes($["b"].MODIFIED_SINCE)),this.tags.push($["b"].MODIFIED_SINCE+" - "+e.selectedYMD)):this.tags=this.tags.filter(t=>!t.includes($["b"].MODIFIED_SINCE));break}this.busy=!1},selectFilterStateOrSort(t,e){switch(this.busy=!0,e?this.updateSelectedFiltersArray(t,e):this.removeFromSelectedFiltersArray(t),t){case $["c"].SORT:this.valueSort=e,this.valueSort?(this.tags=this.tags.filter(t=>!t.includes($["b"].SORT)),this.tags.push($["b"].SORT+" - "+e)):this.tags=this.tags.filter(t=>!t.includes($["b"].SORT));break;case $["c"].STATE:this.valueState=e,this.valueState?(this.tags=this.tags.filter(t=>!t.includes($["b"].STATE)),this.tags.push($["b"].STATE+" - "+e)):this.tags=this.tags.filter(t=>!t.includes($["b"].STATE));break;case $["c"].RUNNING:this.valueRunning=e,this.valueRunning?(this.tags=this.tags.filter(t=>!t.includes($["b"].RUNNING)),this.tags.push($["b"].RUNNING+" - "+e)):this.tags=this.tags.filter(t=>!t.includes($["b"].RUNNING));break}this.busy=!1},selectFilterLimit(t){isNaN(t)?this.valueLimit="":this.valueLimit=t},updateSelectedFiltersArray(t,e){const s=Object.assign({},this.updatedFilters);s[t]=e,this.updatedFilters=s},removeFromSelectedFiltersArray(t){const e=Object.assign({},this.updatedFilters);e[t]&&(delete e[t],this.updatedFilters=e)},clickCheckboxToDisableFilter(t,e){if(!e)switch(t){case $["c"].FROM:this.valueFrom="";break;case $["c"].TO:this.valueTo="";break;case $["c"].STATE:this.valueState=null;break;case $["c"].SORT:this.valueSort=null;break;case $["c"].MODIFIED_SINCE:this.valueModified="";break;case $["c"].LIMIT:this.valueLimit="",this.removeFromSelectedFiltersArray(t),this.tags=this.tags.filter(t=>!t.includes($["b"].LIMIT));break;case $["c"].TYPES:this.selected=[],this.removeFromSelectedFiltersArray(t),this.tags=this.tags.filter(t=>!t.includes($["b"].TYPES));break}},cancelTypeFilters(t){t()},setTypeFilters(t){this.busy=!0,this.selected.length>0?this.updateSelectedFiltersArray($["c"].TYPES,this.selected):this.removeFromSelectedFiltersArray($["c"].TYPES),t(),this.busy=!1}}},B=L,R=(s("dd5e"),Object(f["a"])(B,c,u,!1,null,"91f3a84e",null)),q=R.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("PryvBtn",{attrs:{icon:"arrow-clockwise",content:" Events",id:"submitBtn"},on:{click:t.loadEvents}})},V=[],Y={name:"LoadEventsBtn",components:{PryvBtn:D["a"]},data(){return{events:[],typesSet:new Set}},computed:{...Object(i["b"])(["connectionsMap"]),...Object(i["b"])(["selectedFilters"]),eventsMap:{get(){return this.$store.state.eventsMap},set(t){this.$store.commit("UPDATE_EVENTS_MAP",t)}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set(t){this.$store.commit("UPDATE_DISPLAY_EVENTS_MAP",t)}},types:{get(){return this.$store.state.types},set(t){this.$store.commit("SET_TYPES",t)}},modifiedSinceMap:{get(){return this.$store.state.modifiedSinceMap},set([t,e]){this.$store.commit("ADD_MODIFIED_SINCE_MAP",[t,e])}}},methods:{loadEvents(){let t=this.$sessionStorage.endpoint_arr;t=t?JSON.parse(t):[],t.forEach(t=>{const e=this.connectionsMap[t.key];e&&this.addEventsToStore(e)}),"Events"!==this.currentRouteName()&&this.$router.push("events")},currentRouteName(){return this.$route.name},async addEventsToStore(t){this.events=[];let e=this.modifiedSinceMap[t.apiEndpoint],s={modifiedSince:1e3*e};try{const e=await t.getEventsStreamed(s,this.addEachEvent);this.modifiedSinceMap=[t.apiEndpoint,e.meta.serverTime/1e3],this.typesSet=new Set;const n=Object.assign({},this.eventsDisplayMap);this.events.forEach(e=>{0===this.eventsMap[t.apiEndpoint].filter(t=>t.id===e.id).length&&this.eventsMap[t.apiEndpoint].push(e),0===n[t.apiEndpoint].filter(t=>t.id===e.id).length&&n[t.apiEndpoint].push(e)}),this.eventsDisplayMap=n}catch(n){console.log("Error occurred when retrieving events"+n)}},addEachEvent(t){this.events.push(t),this.typesSet.add(t.type),this.types=this.typesSet}}},J=Y,K=Object(f["a"])(J,U,V,!1,null,null,null),G=K.exports,z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("PryvBtn",{attrs:{icon:"arrow-clockwise",content:" All",id:"submitBtn"},on:{click:t.loadStreams}})},W=[],H=s("b8fc"),Q={name:"LoadAllBtn",components:{PryvBtn:D["a"]},data(){return{events:[],typesSet:new Set}},computed:{...Object(i["b"])(["connectionsMap"]),streamsMap:{get(){return this.$store.state.streamsMap},set(t){this.$store.commit("UPDATE_STREAMS_MAP",t)}},eventsMap:{get(){return this.$store.state.eventsMap},set(t){this.$store.commit("UPDATE_EVENTS_MAP",t)}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set(t){this.$store.commit("UPDATE_DISPLAY_EVENTS_MAP",t)}},types:{get(){return this.$store.state.types},set(t){this.$store.commit("SET_TYPES",t)}},modifiedSinceMap:{get(){return this.$store.state.modifiedSinceMap},set([t,e]){this.$store.commit("ADD_MODIFIED_SINCE_MAP",[t,e])}}},methods:{loadStreams(){let t=this.$sessionStorage.endpoint_arr;t=t?JSON.parse(t):[],t.forEach(t=>{const e=this.connectionsMap[t.key];e&&this.updateStore(e)})},currentRouteName(){return this.$route.name},async addStreamsToStore(t){const e=H["a"].GET_STREAMS_API;e[0].params={state:"all"};try{const s=await t.api(e);if(s){const e=[];s[0].streams.forEach(s=>{this.addStream(t.apiEndpoint,s,e)});const n=Object.assign({},this.streamsMap);n[t.apiEndpoint]=e,this.streamsMap=n}}catch(s){return console.log("Error occurred when retrieving streams "+s),!1}return!0},async addStream(t,e,s){e.children&&0===e.children.length&&s.push(e),e.children&&e.children.length>0&&(s.push(e),e.children.forEach(e=>this.addStream(t,e,s)))},async addEventsToStore(t){this.events=[];let e=this.modifiedSinceMap[t.apiEndpoint],s={modifiedSince:e};try{const e=await t.getEventsStreamed(s,this.forEachEvent);this.modifiedSinceMap=[t.apiEndpoint,e.meta.serverTime],this.typesSet=new Set;let n=Object.assign({},this.eventsDisplayMap);this.events.forEach(e=>{const s=this.eventsMap[this.data.apiEndpoint].findIndex(t=>t.id===e.id);s<=-1?this.eventsMap[t.apiEndpoint].push(e):this.eventsMap[t.apiEndpoint][s]=e;const a=n[this.data.apiEndpoint].findIndex(t=>t.id===e.id);a<=-1?n[t.apiEndpoint].push(e):n[t.apiEndpoint][s]=e}),this.eventsDisplayMap=n}catch(n){return console.log("Error occurred when retrieving events"+n),!1}return!0},forEachEvent(t){this.events.push(t),this.typesSet.add(t.type),this.types=this.typesSet},updateStore(t){this.addStreamsToStore(t)&&this.addEventsToStore(t)&&"Login"===this.currentRouteName()&&this.$router.push("events")}}},Z=Q,X=Object(f["a"])(Z,z,W,!1,null,null,null),tt=X.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-modal",{attrs:{id:t.data.id,title:"Edit event"},on:{hidden:t.resetModal,ok:t.handleOk},scopedSlots:t._u([{key:"default",fn:function(){return[s("form",{ref:t.data.id,on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[s("b-form-group",{attrs:{label:"Connection *","label-for":"input-connection"}},[s("b-form-input",{attrs:{value:t.selectedConnectionComputed,disabled:"",id:"input-connection"}})],1),s("b-form-group",{attrs:{label:"Stream *","label-for":"input-stream","invalid-feedback":"Stream is required",state:t.streamState}},[s("b-form-input",{attrs:{value:t.selectedStreamComputed,placeholder:"Select a stream",list:"input-stream-list",id:"input-stream",required:"",state:t.streamState,autocomplete:"off"},on:{input:t.setStream}}),s("b-form-datalist",{attrs:{id:"input-stream-list",options:t.streamNames}})],1),s("b-form-group",{attrs:{label:"Type *","label-for":"input-type","invalid-feedback":"Type is required",state:t.typeState}},[s("b-form-input",{attrs:{value:t.selectedTypeComputed,list:"input-type-list",id:"input-type",required:"",state:t.typeState,placeholder:"Select a type",autocomplete:"off"},on:{input:t.setTypeObject}}),s("b-form-datalist",{attrs:{id:"input-type-list",options:t.typeNames}})],1),t._l(t.contentNames,(function(e,n){return s("div",{key:"attr-"+n,staticClass:"mt-2"},[s("b-form-group",{attrs:{label:e.label,"label-for":e.labelFor,"invalid-feedback":e.feedback,state:t.contentStates[n]}},["enum"===e.type?s("Dropbox",{staticStyle:{"font-size":"1rem"},attrs:{options:e.enum,valueSelected:e.val,id:e.labelFor,required:e.required,state:t.contentStates[n]},on:{input:function(s){return t.updateValue(e,s)}}}):"attachment"===e.type?s("b-form-file",{attrs:{value:e.val,size:"sm",id:e.labelFor,required:e.required,state:t.contentStates[n]},on:{input:function(s){return t.updateValue(e,s)}}}):s("b-form-input",{attrs:{type:"string"===e.type?"text":e.type,value:e.val,id:e.labelFor,placeholder:e.type,required:e.required,state:t.contentStates[n]},on:{input:function(s){return t.updateValue(e,s)}}})],1)],1)})),s("b-form-group",{attrs:{label:"Time","label-for":"input-time-pick"}},[s("date-picker",{attrs:{id:"input-time","aria-placeholder":"Enter Time",config:t.options},model:{value:t.selectedTimeComputed,callback:function(e){t.selectedTimeComputed=e},expression:"selectedTimeComputed"}})],1),s("b-form-group",{attrs:{label:"Duration","label-for":"input-duration"}},[s("b-form-input",{attrs:{type:"text",id:"input-duration",placeholder:"Enter Duration"},model:{value:t.selectedDurationComputed,callback:function(e){t.selectedDurationComputed=e},expression:"selectedDurationComputed"}})],1),s("b-form-group",{attrs:{label:"Description","label-for":"input-description"}},[s("b-form-input",{attrs:{type:"text",id:"input-description",placeholder:"Enter Description"},model:{value:t.selectedDescriptionComputed,callback:function(e){t.selectedDescriptionComputed=e},expression:"selectedDescriptionComputed"}})],1),s("b-form-group",{attrs:{label:"Client Data","label-for":"input-client-data"}},[s("v-jsoneditor",{ref:"json",attrs:{height:"200px",plus:!1,options:{enableTransform:!1,enableSort:!1,statusBar:!1,mainMenuBar:!0,search:!1,navigationBar:!1,mode:"code",onChangeText:function(e){t.isJSON(e)}}},model:{value:t.selectedClientDataComputed,callback:function(e){t.selectedClientDataComputed=e},expression:"selectedClientDataComputed"}})],1)],2)]},proxy:!0},{key:"modal-footer",fn:function(e){e.ok;var n=e.cancel;return[s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"OK",icon:"check",type:"submit",variant:"success"},on:{click:t.handleOk}}),s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"Cancel",icon:"x"},on:{click:function(e){return t.cancelEdit(n)}}})]}}])})},st=[],nt={name:"EditEventModal",components:{Dropbox:k,PryvBtn:D["a"]},props:{data:{type:Object,required:!0,default:null}},data(){return{options:{format:"MM/DD/YYYY h:mm:ss",useCurrent:!1,showClear:!0,showClose:!0},connectionLbl:"Select the Connection",selectedConnection:null,selectedEndpoint:null,selectedStream:null,selectedType:null,selectedTypeObject:null,type:"note/txt",streamState:null,typeState:null,contentStatesCheck:[],contentObjs:null,selectedTime:null,selectedDuration:null,selectedDescription:null,clientData:null,okDisable:!1}},computed:{...Object(i["b"])(["connectionsMap"]),...Object(i["b"])(["accessInfoMap"]),...Object(i["b"])(["streamsMap"]),...Object(i["b"])(["typesAll"]),selectedConnectionComputed:{get(){return this.selectedConnection?this.selectedConnection:this.accessInfoMap[this.data.apiEndpoint].name},set(t){this.selectedConnection=t}},selectedEndpointComputed:{get(){return this.selectedEndpoint?this.selectedEndpoint:this.data.apiEndpoint},set(t){this.selectedEndpoint=t}},selectedStreamComputed:{get(){if(this.selectedStream)return this.selectedStream;{const t=this.streamsMap[this.data.apiEndpoint].filter(t=>t.id===this.data.streamId);return`${t[0].name} [${this.data.streamId}]`}},set(t){this.selectedStream=t}},selectedTypeComputed:{get(){return this.selectedType?this.selectedType:this.data.type},set(t){this.selectedType=t}},selectedTypeObjectComputed:{get(){return this.selectedTypeObject?this.selectedTypeObject:this.typesAll[this.selectedTypeComputed]},set(t){this.selectedTypeObject=t}},selectedTimeComputed:{get(){return this.selectedTime?this.selectedTime:new Date(1e3*this.data.time)},set(t){this.selectedTime=t}},selectedDurationComputed:{get(){return this.selectedDuration?this.selectedDuration:this.data.duration},set(t){this.selectedDuration=t}},selectedDescriptionComputed:{get(){return this.selectedDescription?this.selectedDescription:this.data.description},set(t){this.selectedDescription=t}},selectedClientDataComputed:{get(){return this.clientData?this.clientData:this.data.clientData},set(t){this.clientData=t}},connectionNames(){return Object.keys(this.accessInfoMap).map(t=>({value:this.accessInfoMap[t].name,text:t}))},streamNames(){if(null!==this.selectedConnectionComputed&&null!==this.selectedEndpointComputed){const t=Object.keys(this.streamsMap).filter(t=>t===this.selectedEndpointComputed);return this.streamsMap[t].map(e=>({value:`${e.name} [${e.id}]`,text:t}))}return null},typeNames(){return Object.keys(this.typesAll).map(t=>({value:t,text:this.typesAll[t].type}))},contentStates(){if(0===this.contentStatesCheck.length){const t=[];for(let e=0;e<this.contentNames.length;e++)t.push(null);return t}return this.contentStatesCheck},contentNames(){const t=[];if(null!==this.selectedTypeObjectComputed&&this.selectedTypeObjectComputed){if(this.data.type!==this.selectedTypeComputed)if("string"===this.selectedTypeObjectComputed.type&&this.selectedTypeObjectComputed.enum){const e={label:"Content "+(this.selectedTypeObjectComputed.required?"*":""),type:"enum",val:null,enum:this.selectedTypeObjectComputed.enum,required:!!this.selectedTypeObjectComputed.required,labelFor:"input-content-Content",feedback:"Content is required"};t.push(e)}else if("null"===this.selectedTypeObjectComputed.type&&this.selectedTypeObjectComputed.attachmentRequired){const e={label:"Attachment "+(this.selectedTypeObjectComputed.required?"*":""),type:"attachment",val:null,required:!!this.selectedTypeObjectComputed.required,labelFor:"input-content-Attachment",feedback:"Attachment is required"};t.push(e)}else if("string"===this.selectedTypeObjectComputed.type){const e={label:"Content "+(this.selectedTypeObjectComputed.required?"*":""),type:this.selectedTypeObjectComputed.type,val:null,required:!!this.selectedTypeObjectComputed.required,labelFor:"input-content-Content",feedback:"Content is required"};t.push(e)}else if("number"===this.selectedTypeObjectComputed.type){const e={label:"Content *",type:this.selectedTypeObjectComputed.type,val:null,required:!0,labelFor:"input-content-Content",feedback:"Content is required"};t.push(e)}else"object"!==this.selectedTypeObjectComputed.type&&"array"!==this.selectedTypeObjectComputed.type||Object.keys(this.selectedTypeObjectComputed.properties).forEach(e=>{const s={label:`${e}${this.getRequired(e)?"*":""}`,type:this.selectedTypeObjectComputed.properties[e].type,val:null,required:this.getRequired(e),labelFor:"input-content-"+e,feedback:e+" is required",labelKey:e};t.push(s)});else if("string"===this.selectedTypeObjectComputed.type&&this.selectedTypeObjectComputed.enum){const e={label:"Content "+(this.selectedTypeObjectComputed.required?"*":""),type:"enum",val:this.data.content,enum:this.selectedTypeObjectComputed.enum,required:!!this.selectedTypeObjectComputed.required,labelFor:"input-content-Content",feedback:"Content is required"};t.push(e)}else if("null"===this.selectedTypeObjectComputed.type&&this.selectedTypeObjectComputed.attachmentRequired){const e={label:"Attachment "+(this.selectedTypeObjectComputed.required?"*":""),type:"attachment",val:null,required:!!this.selectedTypeObjectComputed.required,labelFor:"input-content-Attachment",feedback:"Attachment is required"};t.push(e)}else if("string"===this.selectedTypeObjectComputed.type){const e={label:"Content "+(this.selectedTypeObjectComputed.required?"*":""),type:this.selectedTypeObjectComputed.type,val:this.data.content.toString(),required:!!this.selectedTypeObjectComputed.required,labelFor:"input-content-Content",feedback:"Content is required"};t.push(e)}else if("number"===this.selectedTypeObjectComputed.type){const e={label:"Content *",type:this.selectedTypeObjectComputed.type,val:this.data.content.toString(),required:!0,labelFor:"input-content-Content",feedback:"Content is required"};t.push(e)}else"object"!==this.selectedTypeObjectComputed.type&&"array"!==this.selectedTypeObjectComputed.type||Object.keys(this.selectedTypeObjectComputed.properties).forEach(e=>{const s={label:`${e}${this.getRequired(e)?"*":""}`,type:this.selectedTypeObjectComputed.properties[e].type,val:"string"===this.selectedTypeObjectComputed.properties[e].type?this.data.content[e].toString():"number"===this.selectedTypeObjectComputed.properties[e].type?+this.data.content[e]:null,required:this.getRequired(e),labelFor:"input-content-"+e,feedback:e+" is required",labelKey:e};t.push(s)});return t}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set(t){this.$store.commit("UPDATE_DISPLAY_EVENTS_MAP",t)}},eventsMap:{get(){return this.$store.state.eventsMap},set(t){this.$store.commit("UPDATE_DISPLAY_EVENTS_MAP",t)}}},methods:{isJSON:function(t){try{JSON.parse(t),this.okDisable=!1}catch(e){this.okDisable=!0}""===t&&(this.okDisable=!1)},getRequired(t){return!!(this.selectedTypeObjectComputed.required&&this.selectedTypeObjectComputed.required.length>0&&this.selectedTypeObjectComputed.required.includes(t))},checkFormValidity(){const t=this.$refs[this.data.id].checkValidity();return""===this.selectedStream&&(this.streamState=t),""===this.selectedType&&(this.typeState=t),this.contentNames&&this.contentNames.forEach(e=>{let s;!0!==e.required||""!==e.val&&null!==e.val?(s=this.contentNames.indexOf(e),this.$set(this.contentStatesCheck,s,null)):(s=this.contentNames.indexOf(e),this.$set(this.contentStatesCheck,s,t))}),t},handleOk(t){t.preventDefault(),this.handleSubmit()},async handleSubmit(){this.checkFormValidity()&&await this.editEvent()},async editEvent(){const t={};if(this.data.streamId!==this.selectedStreamComputed.split(" ").slice(-1)[0].replace(/[[\]]/g,"")&&(t["streamId"]=this.selectedStreamComputed.split(" ").slice(-1)[0].replace(/[[\]]/g,"")),this.data.type!==this.selectedTypeComputed){t["type"]=this.selectedTypeComputed;let e=null;"string"===this.selectedTypeObjectComputed.type?e=this.contentNames[0].val:"number"===this.selectedTypeObjectComputed.type?e=+this.contentNames[0].val:"object"===this.selectedTypeObjectComputed.type||"array"===this.selectedTypeObjectComputed.type?(e={},this.contentNames.forEach(t=>{if("number"===t.type){let s=+t.val;isNaN(s)||(e[t.labelKey]=s)}else t.val&&(e[t.labelKey]=t.val)})):("attachment"===this.selectedTypeObjectComputed.type||"null"===this.selectedTypeObjectComputed.type)&&(e=null),"object"===typeof e&&null!==e?Object.keys(e).length>0&&(t["content"]=e):null!==e&&(t["content"]=e)}else{let e=null;if("string"===this.selectedTypeObjectComputed.type)this.data.content!==this.contentNames[0].val&&(e=this.contentNames[0].val);else if("number"===this.selectedTypeObjectComputed.type)this.data.content!==+this.contentNames[0].val&&(e=+this.contentNames[0].val);else if("object"===this.selectedTypeObjectComputed.type||"array"===this.selectedTypeObjectComputed.type){e={};let t=!1;this.contentNames.every(function(e){let s="number"===e.type?+e.val:e.val;return this.data.content[e.labelKey]===s||(t=!0,!1)}.bind(this)),!0===t&&this.contentNames.forEach(t=>{if("number"===t.type){let s=+t.val;isNaN(s)||(e[t.labelKey]=s)}else t.val&&(e[t.labelKey]=t.val)})}else("attachment"===this.selectedTypeObjectComputed.type||"null"===this.selectedTypeObjectComputed.type)&&(e=null);"object"===typeof e&&null!==e?Object.keys(e).length>0&&(t["content"]=e):null!==e&&(t["content"]=e),new Date(1e3*this.data.time)!==this.selectedTimeComputed&&null!==this.selectedTime&&""!==this.selectedTime&&(t["time"]=new Date(this.selectedTimeComputed).getTime()/1e3),this.data.duration!==this.selectedDurationComputed&&null!==this.selectedDuration&&""!==this.selectedDuration&&(t["duration"]=+this.selectedDurationComputed),this.data.description!==this.selectedDescriptionComputed&&(t["description"]=this.selectedDescriptionComputed),this.data.clientData!==this.selectedClientDataComputed&&(t["clientData"]=this.selectedClientDataComputed)}if(0===Object.keys(t).length)return void alert("No changes to the event. Please cancel if you dont want to change the event");const e=this.connectionsMap[this.selectedEndpointComputed];try{const s=H["a"].UPDATE_EVENT_API;s[0].params={id:this.data.id,update:t};const n=await e.api(s);if(n&&n[0]&&n[0].error)return alert(n[0].error.id+" - "+n[0].error.message),void this.resetModal();await this.addEventsToStore(n[0].event)}catch(s){console.log("Error occurred when creating modals"+s)}},async addEventsToStore(t){const e=Object.assign({},this.eventsDisplayMap),s=e[this.data.apiEndpoint].findIndex(e=>e.id===t.id);e[this.data.apiEndpoint][s]=t;const n=this.eventsMap[this.data.apiEndpoint].findIndex(e=>e.id===t.id);this.eventsMap[this.data.apiEndpoint][n]=t,this.eventsDisplayMap=e,this.$bvModal.hide(this.data.id)},resetModal(){this.selectedEndpoint=this.data.apiEndpoint,this.selectedConnection=this.accessInfoMap[this.data.apiEndpoint].name;const t=this.streamsMap[this.data.apiEndpoint].filter(t=>t.id===this.data.streamId);this.selectedStream=`${t[0].name} [${this.data.streamId}]`,this.selectedType=this.data.type,this.selectedTypeObject=this.typesAll[this.selectedType],this.data.type===this.selectedType&&this.contentNames&&("object"===this.data.type||"array"===this.data.type?this.contentNames.forEach(t=>{let e=t.labelKey;t.val=this.data.content[e]}):"string"===this.data.type||this.data.enum?this.contentNames[0]=this.data.content.toString():"number"===this.data.type&&(this.contentNames[0]=this.data.content)),this.selectedTime=new Date(1e3*this.data.time),this.selectedDuration=this.data.duration,this.selectedDescription=this.data.description,this.clientData=this.data.clientData,this.streamState=null,this.typeState=null,this.contentStatesCheck=[]},setEndpoint(t){this.selectedConnectionComputed=t,this.selectedEndpointComputed=t?this.connectionNames.find(t=>t.value===this.selectedConnectionComputed).text:t},setTypeObject(t){this.selectedTypeComputed=t,this.typeState=null,this.selectedTypeObjectComputed=t?this.typesAll[this.selectedTypeComputed]:null},updateValue(t,e){t.val=e,this.$set(this.contentStatesCheck,this.contentNames.indexOf(t),null)},cancelEdit(t){this.resetModal(),t()},setStream(t){this.streamState=null,this.selectedStreamComputed=t}}},at=nt,it=Object(f["a"])(at,et,st,!1,null,"09a3268d",null),rt=it.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-modal",{ref:"modal",attrs:{id:"modal-scoped-event",title:"Add a new event"},on:{hidden:t.resetModal,ok:t.handleOk,show:t.resetModal},scopedSlots:t._u([{key:"default",fn:function(){return[s("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[s("b-form-group",{attrs:{label:"Connection *","label-for":"input-connection","invalid-feedback":"Connection is required",state:t.connectionState}},[s("b-form-input",{attrs:{value:t.selectedConnection,placeholder:"Select a endpoint",list:"input-connection-list",id:"input-connection",state:t.connectionState,required:"",autocomplete:"off"},on:{input:t.setEndpoint}}),s("b-form-datalist",{attrs:{id:"input-connection-list",options:t.connectionNames}})],1),s("b-form-group",{attrs:{label:"Stream *","label-for":"input-stream","invalid-feedback":"Stream is required",state:t.streamState}},[s("b-form-input",{attrs:{value:t.selectedStream,placeholder:"Select a stream",list:"input-stream-list",id:"input-stream",required:"",state:t.streamState,autocomplete:"off"},on:{input:t.setStream}}),s("b-form-datalist",{attrs:{id:"input-stream-list",options:t.streamNames}})],1),s("b-form-group",{attrs:{label:"Type *","label-for":"input-type","invalid-feedback":"Type is required",state:t.typeState}},[s("b-form-input",{attrs:{value:t.selectedType,list:"input-type-list",id:"input-type",required:"",state:t.typeState,placeholder:"Select a type",autocomplete:"off"},on:{input:t.setTypeObject}}),s("b-form-datalist",{attrs:{id:"input-type-list",options:t.typeNames}})],1),t._l(t.contentNames,(function(e,n){return s("div",{key:"attr-"+n,staticClass:"mt-2"},[s("b-form-group",{attrs:{label:e.label,"label-for":e.labelFor,"invalid-feedback":e.feedback,state:t.contentStates[n]}},["enum"===e.type?s("Dropbox",{attrs:{options:e.enum,valueSelected:e.val,id:e.labelFor,required:e.required,state:t.contentStates[n]},on:{input:function(s){return t.updateValue(e,s)}}}):"attachment"===e.type?s("b-form-file",{attrs:{value:e.val,size:"sm",id:e.labelFor,required:e.required,state:t.contentStates[n]},on:{input:function(s){return t.updateValue(e,s)}}}):"number"===e.type?s("b-form-input",{attrs:{type:"number",value:e.val,id:e.labelFor,placeholder:e.type,required:e.required,state:t.contentStates[n]},on:{input:function(s){return t.updateValue(e,s)}}}):"string"===e.type?s("b-form-input",{attrs:{type:"text",value:e.val,id:e.labelFor,placeholder:e.type,required:e.required,state:t.contentStates[n]},on:{input:function(s){return t.updateValue(e,s)}}}):t._e()],1)],1)})),s("b-form-group",{attrs:{label:"Time","label-for":"input-time-pick"}},[s("date-picker",{attrs:{"aria-placeholder":"Enter Time",config:t.options},model:{value:t.selectedTimeStamp,callback:function(e){t.selectedTimeStamp=e},expression:"selectedTimeStamp"}})],1),s("b-form-group",{attrs:{label:"Duration","label-for":"input-duration"}},[s("b-form-input",{attrs:{type:"text",id:"input-duration",placeholder:"Enter Duration"},model:{value:t.selectedDuration,callback:function(e){t.selectedDuration=e},expression:"selectedDuration"}})],1),s("b-form-group",{attrs:{label:"Description","label-for":"input-description"}},[s("b-form-input",{attrs:{type:"text",id:"input-description",placeholder:"Enter Description"},model:{value:t.selectedDescription,callback:function(e){t.selectedDescription=e},expression:"selectedDescription"}})],1),s("b-form-group",{attrs:{label:"Client Data","label-for":"input-client-data"}},[s("v-jsoneditor",{attrs:{plus:!1,height:"200px",options:{enableTransform:!1,enableSort:!1,statusBar:!1,mainMenuBar:!0,search:!1,navigationBar:!1,mode:"code",onChangeText:function(e){t.isJSON(e)}}}})],1)],2)]},proxy:!0},{key:"modal-footer",fn:function(e){e.ok;var n=e.cancel;return[s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"OK",icon:"check",type:"submit",variant:"success",disabled:t.okDisable},on:{click:t.handleOk}}),s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"Cancel",icon:"x"},on:{click:function(t){return n()}}})]}}])})},lt=[],ct={name:"AddEventModal",components:{PryvBtn:D["a"],Dropbox:k},data(){return{selectedConnection:null,selectedStream:null,selectedEndpoint:null,selectedType:null,selectedTypeObject:null,connectionLbl:"Select the Connection",type:"note/txt",content:null,connectionState:null,streamState:null,typeState:null,contentStatesCheck:[],selectedTimeStamp:null,options:{format:"MM/DD/YYYY h:mm:ss",useCurrent:!1,showClear:!0,showClose:!0},selectedDuration:null,selectedDescription:null,clientData:null,okDisable:!1}},computed:{...Object(i["b"])(["connectionsMap"]),...Object(i["b"])(["accessInfoMap"]),...Object(i["b"])(["streamsMap"]),...Object(i["b"])(["typesAll"]),...Object(i["b"])(["eventsMap"]),connectionNames(){return Object.keys(this.accessInfoMap).map(t=>({value:this.accessInfoMap[t].name,text:t}))},streamNames(){if(null===this.selectedConnection&&null===this.selectedEndpoint||""===this.selectedConnection&&""===this.selectedEndpoint)return;const t=Object.keys(this.streamsMap).filter(t=>t===this.selectedEndpoint);return this.streamsMap[t].filter(t=>!t.trashed).map(e=>({value:`${e.name} [${e.id}]`,text:t}))},typeNames(){return Object.keys(this.typesAll).map(t=>({value:t,text:this.typesAll[t].type}))},contentStates(){if(0===this.contentStatesCheck.length){const t=[];for(let e=0;e<this.contentNames.length;e++)t.push(null);return t}return this.contentStatesCheck},contentNames(){const t=[];if(null!==this.selectedTypeObject&&this.selectedTypeObject){if("string"===this.selectedTypeObject.type&&this.selectedTypeObject.enum){const e={label:"Content "+(this.selectedTypeObject.required?"*":""),type:"enum",val:null,enum:this.selectedTypeObject.enum,required:!!this.selectedTypeObject.required,labelFor:"input-content-Content",feedback:"Content is required"};t.push(e)}else if("null"===this.selectedTypeObject.type&&this.selectedTypeObject.attachmentRequired){const e={label:"Attachment "+(this.selectedTypeObject.required?"*":""),type:"attachment",val:null,required:!!this.selectedTypeObject.required,State:null,labelFor:"input-content-Attachment",feedback:"Attachment is required"};t.push(e)}else if("string"===this.selectedTypeObject.type||"number"===this.selectedTypeObject.type){const e={label:"Content "+("number"===this.selectedTypeObject.type?"*":""),type:this.selectedTypeObject.type,val:null,required:"number"===this.selectedTypeObject.type,labelFor:"input-content-Content",feedback:"Content is required"};t.push(e)}else"object"!==this.selectedTypeObject.type&&"array"!==this.selectedTypeObject.type||Object.keys(this.selectedTypeObject.properties).forEach(e=>{if("required"===e)return;const s={label:`${e}${this.getRequired(e)?"*":""}`,type:this.selectedTypeObject.properties[e].type,val:null,required:this.getRequired(e),labelFor:"input-content-"+e,feedback:e+" is required",labelKey:e};t.push(s)});return t}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set(t){this.$store.commit("UPDATE_DISPLAY_EVENTS_MAP",t)}},modifiedSinceMap:{get(){return this.$store.state.modifiedSinceMap},set([t,e]){this.$store.commit("ADD_MODIFIED_SINCE_MAP",[t,e])}}},methods:{isJSON:function(t){try{JSON.parse(t),this.clientData=t,this.okDisable=!1}catch(e){this.okDisable=!0}""===t&&(this.clientData=null,this.okDisable=!1)},getRequired(t){return!!(this.selectedTypeObject.required&&this.selectedTypeObject.required.length>0&&this.selectedTypeObject.required.includes(t))},checkFormValidity(){const t=this.$refs.form.checkValidity();return null!==this.selectedEndpoint&&""!==this.selectedEndpoint||(this.connectionState=t),null!==this.selectedStream&&""!==this.selectedStream||(this.streamState=t),null!==this.selectedType&&""!==this.selectedType||(this.typeState=t),this.contentNames&&this.contentNames.forEach((e,s)=>{!0!==e.required||null!==e.val&&""!==e.val?this.$set(this.contentStatesCheck,s,null):this.$set(this.contentStatesCheck,s,t)}),t},handleOk(t){t.preventDefault(),this.handleSubmit()},async handleSubmit(){this.checkFormValidity()&&await this.addEvent()},async addEvent(){if(null===this.selectedEndpoint)return;if(null===this.selectedStream)return;if(null===this.selectedTypeObject)return;const t=this.connectionsMap[this.selectedEndpoint];try{const e=H["a"].CREATE_EVENT_API;let s=null;if("string"===this.selectedTypeObject.type?s=this.contentNames[0].val:"number"===this.selectedTypeObject.type?s=+this.contentNames[0].val:"object"!==this.selectedTypeObject.type&&"array"!==this.selectedTypeObject.type||(s={},this.contentNames.forEach(t=>{if("number"===t.type){let e=+t.val;isNaN(e)||(s[t.labelKey]=e)}else t.val&&(s[t.labelKey]=t.val)})),"null"===this.selectedTypeObject.type&&this.contentNames.length>0&&"attachment"===this.contentNames[0].type){let e=new FormData;e.append("file0",this.contentNames[0].val),t.createEventWithFormData({type:this.selectedType.toLowerCase(),streamId:this.selectedStream.split(" ").slice(-1)[0].replace(/[[\]]/g,"")},e).then(function(t,e){if(e)return alert(e),void this.resetModal();t.event&&this.addEventsToStore(t.event)}.bind(this))}else{e[0].params={streamId:this.selectedStream.split(" ").slice(-1)[0].replace(/[[\]]/g,""),type:this.selectedType.toLowerCase(),content:s},null!==this.selectedTimeStamp&&""!==this.selectedTimeStamp&&(e[0].params["time"]=new Date(this.selectedTimeStamp).getTime()/1e3),null!==this.selectedDuration&&""!==this.selectedDuration&&(e[0].params["duration"]=+this.selectedDuration),null!==this.selectedDescription&&(e[0].params["description"]=this.selectedDescription),null!==this.clientData&&(e[0].params["clientData"]=JSON.parse(this.clientData));const n=await t.api(e);console.log(e[0].params["time"]),console.log("result add event"),console.log(n),n&&n[0]&&n[0].error?(alert(n[0].error.id+" - "+n[0].error.message),this.resetModal()):await this.addEventsToStore(n[0].event)}}catch(e){console.log("Error occurred when creating modals"+e)}},async addEventsToStore(t){let e=JSON.parse(JSON.stringify(this.eventsDisplayMap));e[this.selectedEndpoint].unshift(t),this.eventsMap[this.selectedEndpoint].unshift(t),this.eventsDisplayMap=e,this.$bvModal.hide("modal-scoped-event")},resetModal(){this.selectedEndpoint=null,this.selectedConnection=null,this.selectedStream=null,this.selectedType=null,this.selectedTypeObject=null,this.selectedTimeStamp=null,this.selectedDuration=null,this.selectedDescription=null,this.clientData=null,this.connectionState=null,this.streamState=null,this.typeState=null,this.contentStatesCheck=[]},setEndpoint(t){this.connectionState=null,this.selectedConnection=t,this.selectedEndpoint=t?this.connectionNames.find(t=>t.value===this.selectedConnection).text:t},setStream(t){this.streamState=null,this.selectedStream=t},setTypeObject(t){this.typeState=null,this.selectedType=t,this.selectedTypeObject=t?this.typesAll[this.selectedType]:null},updateValue(t,e){t.val=e,this.$set(this.contentStatesCheck,this.contentNames.indexOf(t),null)}}},ut=ct,dt=Object(f["a"])(ut,ot,lt,!1,null,"49a16c63",null),pt=dt.exports,ht={name:"Events",components:{AddEventModal:pt,EditEventModal:rt,PryvBtn:D["a"],LoadAllBtn:tt,LoadEventsBtn:G,FilterPanel:q,PryvAlert:l["a"],VueJsonPretty:o.a},data(){return{fetchData:[],show:!0,message:"No info available to display.",typesSet:new Set,showOverlay:!1,limit:20,fields:[{key:"edit",label:"Edit"},{key:"id",label:"Id",sortable:!0},{key:"streamId",label:"Stream Id",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"time",label:"Time",formatter:t=>new Date(1e3*t).toUTCString(),sortable:!0},{key:"content",label:"Content"},{key:"streamIds",label:"Stream Ids"},{key:"tags",label:"Tags"},{key:"attachments",label:"Attachments Id"},{key:"description",label:"Description"},{key:"clientData",label:"Client Data"},{key:"created",label:"Created",sortable:!0,formatter:t=>new Date(1e3*t).toUTCString()},{key:"createdBy",label:"Created By"},{key:"modified",label:"Modified",sortable:!0,formatter:t=>new Date(1e3*t).toUTCString()},{key:"modifiedBy",label:"Modified By"}]}},computed:{...Object(i["b"])(["selectedStreams"]),...Object(i["b"])(["selectedFilters"]),...Object(i["b"])(["eventsMap"]),displayJSON(){return this.fetchData.length>0?this.fetchData:" "},types:{get(){return this.$store.state.types},set(t){this.$store.commit("SET_TYPES",t)}},typesAll:{get(){return this.$store.state.typesAll},set(t){this.$store.commit("SET_TYPES_ALL",t)}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set([t,e]){this.$store.commit("ADD_DISPLAY_EVENTS_MAP",[t,e])}}},mounted(){this.axios.get($["a"].DEFAULT_SERVICE_INFO_URL).then(t=>{this.axios.get(t.data.eventTypes).then(t=>{let e=t.data.types;Object.keys(e).forEach((function(t){const s=e[t];delete e[t],e[t.toLowerCase()]=s})),this.typesAll=e})})},async created(){await this.displayEvents()},watch:{selectedStreams(){this.selectStreamsOrFilters()},selectedFilters(){this.selectStreamsOrFilters()},eventsDisplayMap(){this.selectStreamsOrFilters()}},methods:{selectStreamsOrFilters(){this.showOverlay=!0,setTimeout(async function(){await this.displayEvents(),await this.filterEvents(),this.showOverlay=!1}.bind(this),100)},async displayEvents(){this.fetchData=[],this.typesSet=new Set;const t=20;if(!this.selectedStreams||!this.eventsDisplayMap||this.eventsDisplayMap&&0===Object.keys(this.eventsDisplayMap).length)return;if(this.selectedFilters&&Object.keys(this.selectedFilters).includes($["c"].LIMIT)){const t=parseInt(this.selectedFilters[$["c"].LIMIT]);this.limit=t;for(const[e,s]of Object.entries(this.eventsMap))this.eventsDisplayMap[e]=s.slice(0,t)}else{this.limit=t;for(const[e,s]of Object.entries(this.eventsDisplayMap))s.length>20&&(this.eventsDisplayMap[e]=s.slice(0,t))}let e=[];for(const[s,n]of Object.entries(this.selectedStreams)){let t={};for(let e=0;e<this.eventsDisplayMap[s].length;e++){let n=this.eventsDisplayMap[s][e].streamId;Object.keys(t).includes(n)||(t[n]=[]);let a=this.eventsDisplayMap[s][e];a.apiEndpoint=s,a.endpoint=s.split("@")[1],a.endpoint=s.split("@")[1],a.token=s.split("@")[0].replace(/(^\w+:|^)\/\//,""),t[n].push(a)}for(let s=0;s<n.length;s++)Object.keys(t).includes(n[s])&&t[n[s]].forEach(t=>{e.push(t),this.typesSet.add(t.type)})}e.length>0&&(this.fetchData.push(...e),this.types=this.typesSet)},async filterEvents(){let t=this.fetchData;this.selectedFilters&&(1===Object.keys(this.selectedFilters).length&&Object.keys(this.selectedFilters).includes($["c"].LIMIT)||(Object.keys(this.selectedFilters).sort().forEach(e=>{switch(e){case $["c"].FROM:{const s=t.filter(function(t){return t.time>this.selectedFilters[e]}.bind(this));t=[...s];break}case $["c"].TO:{const s=t.filter(function(t){return t.time<this.selectedFilters[e]}.bind(this));t=[...s];break}case $["c"].TYPES:{const s=t.filter(function(t){return this.selectedFilters[e].includes(t.type)}.bind(this));t=[...s];break}case $["c"].RUNNING:{const e=t.filter(function(t){return null===t.duration}.bind(this));t=[...e];break}case $["c"].STATE:{const s=t.filter(function(t){return $["d"].TRASHED in t&&$["d"].TRASHED===this.selectedFilters[e]||!($["d"].DEFAULT in t)&&$["d"].DEFAULT===this.selectedFilters[e]||$["d"].ALL===this.selectedFilters[e]}.bind(this));t=[...s];break}case $["c"].MODIFIED_SINCE:{const s=t.filter(function(t){return t.time>this.selectedFilters[e]}.bind(this));t=[...s];break}case $["c"].SORT:!0===this.selectedFilters[e]?t.sort((t,e)=>t.time>e.time?1:e.time>t.time?-1:0):t.sort((t,e)=>t.time<e.time?1:e.time<t.time?-1:0);break}}),this.fetchData=[...t]))},openJSON(t,e,s){this.axios.get(`https://${t}events/${e}/series?auth=${s}`).then(t=>{var e=JSON.stringify(t.data,null,2),s=window.open();s.document.open(),s.document.write("<html><body><pre>"+e+"</pre></body></html>"),s.document.close()})}}},mt=ht,ft=(s("f12a"),Object(f["a"])(mt,n,a,!1,null,null,null));e["default"]=ft.exports},b162:function(t,e,s){"use strict";var n=s("fa3c"),a=s.n(n);a.a},b1aa:function(t,e,s){"use strict";var n=s("4ab9"),a=s.n(n);a.a},b707:function(t,e,s){"use strict";var n=function(t,e){var s=e._c;return s("b-button",{staticClass:"pryv-btn-style mt-2",attrs:{variant:e.props.variant?e.props.variant:"danger",type:e.props.type,disabled:!!e.props.disabled&&e.props.disabled},on:{click:e.listeners.click}},[e.props.icon?s("b-icon",{attrs:{icon:e.props.icon,"font-scale":"1"}}):e._e(),e._v(" "+e._s(e.props.content))],1)},a=[],i={name:"PryvBtn"},r=i,o=s("2877"),l=Object(o["a"])(r,n,a,!0,null,null,null);e["a"]=l.exports},b8fc:function(t,e,s){"use strict";const n=[{method:"getAccessInfo",params:{}}],a=[{method:"events.get",params:{}}],i=[{method:"streams.get",params:{}}],r=[{method:"streams.create",params:{}}],o=[{method:"events.create",params:{}}],l=[{method:"streams.update",params:{}}],c=[{method:"events.update",params:{}}],u=[{method:"streams.delete",params:{}}];e["a"]={ACCESS_INFO_API:n,GET_EVENTS_API:a,GET_STREAMS_API:i,CREATE_EVENT_API:o,UPDATE_STREAM_API:l,DELETE_STREAM_API:u,UPDATE_EVENT_API:c,CREATE_STREAM_API:r}},bb51:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"bg-white shadow w-75 p-3"},[s("b-row",{staticClass:"align-items-center"},[s("b-col",{attrs:{cols:"12"}},[s("h3",[t._v("Swiss-made Personal Data & Privacy Management Software")])])],1),s("b-row",{staticClass:"align-items-center"},[s("b-col",{attrs:{cols:"12"}},[s("img",{attrs:{src:"https://pryv.com/wp-content/themes/pryv2019/assets/img/Illustration-hero.svg",scale:"0",width:"50%",alt:"PRYV"}})])],1),s("b-row",{staticClass:"align-items-center"},[s("b-col",{attrs:{cols:"12"}},[s("h5",[s("b",[t._v("A ready-to-use middleware for personal data and consent management")])]),s("p",[t._v(" Pryv.io is a solid foundation on which you build your own digital health solution, so you can collect, store, share and rightfully use personal data. ")])])],1)],1)},a=[],i=s("2877"),r={},o=Object(i["a"])(r,n,a,!1,null,null,null);e["default"]=o.exports},c189:function(t,e,s){"use strict";var n=s("cd50"),a=s.n(n);a.a},cd50:function(t,e,s){},d538:function(t,e,s){!function(e,s){t.exports=s()}(window,(function(){return function(t){var e={};function s(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=67)}([function(t,e){var s=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=s)},function(t,e,s){var n=s(25)("wks"),a=s(27),i=s(2).Symbol,r="function"==typeof i;(t.exports=function(t){return n[t]||(n[t]=r&&i[t]||(r?i:a)("Symbol."+t))}).store=n},function(t,e){var s=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=s)},function(t,e,s){t.exports=!s(8)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,s){var n=s(2),a=s(0),i=s(19),r=s(5),o=s(9),l=function(t,e,s){var c,u,d,p=t&l.F,h=t&l.G,m=t&l.S,f=t&l.P,b=t&l.B,v=t&l.W,y=h?a:a[e]||(a[e]={}),g=y.prototype,S=h?n:m?n[e]:(n[e]||{}).prototype;for(c in h&&(s=e),s)(u=!p&&S&&void 0!==S[c])&&o(y,c)||(d=u?S[c]:s[c],y[c]=h&&"function"!=typeof S[c]?s[c]:b&&u?i(d,n):v&&S[c]==d?function(t){var e=function(e,s,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,s)}return new t(e,s,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(d):f&&"function"==typeof d?i(Function.call,d):d,f&&((y.virtual||(y.virtual={}))[c]=d,t&l.R&&g&&!g[c]&&r(g,c,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,s){var n=s(6),a=s(13);t.exports=s(3)?function(t,e,s){return n.f(t,e,a(1,s))}:function(t,e,s){return t[e]=s,t}},function(t,e,s){var n=s(7),a=s(35),i=s(36),r=Object.defineProperty;e.f=s(3)?Object.defineProperty:function(t,e,s){if(n(t),e=i(e,!0),n(s),a)try{return r(t,e,s)}catch(t){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");return"value"in s&&(t[e]=s.value),t}},function(t,e,s){var n=s(12);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var s={}.hasOwnProperty;t.exports=function(t,e){return s.call(t,e)}},function(t,e,s){var n=s(15);t.exports=function(t){return Object(n(t))}},function(t,e,s){t.exports={default:s(61),__esModule:!0}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,s){var n=s(38),a=s(28);t.exports=Object.keys||function(t){return n(t,a)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var s=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:s)(t)}},function(t,e,s){var n=s(25)("keys"),a=s(27);t.exports=function(t){return n[t]||(n[t]=a(t))}},function(t,e){t.exports={}},function(t,e,s){var n=s(34);t.exports=function(t,e,s){if(n(t),void 0===e)return t;switch(s){case 1:return function(s){return t.call(e,s)};case 2:return function(s,n){return t.call(e,s,n)};case 3:return function(s,n,a){return t.call(e,s,n,a)}}return function(){return t.apply(e,arguments)}}},function(t,e,s){var n=s(12),a=s(2).document,i=n(a)&&n(a.createElement);t.exports=function(t){return i?a.createElement(t):{}}},function(t,e,s){var n=s(22),a=s(15);t.exports=function(t){return n(a(t))}},function(t,e,s){var n=s(23);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){var s={}.toString;t.exports=function(t){return s.call(t).slice(8,-1)}},function(t,e,s){var n=s(16),a=Math.min;t.exports=function(t){return t>0?a(n(t),9007199254740991):0}},function(t,e,s){var n=s(0),a=s(2),i=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:s(26)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!0},function(t,e){var s=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++s+n).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,s){var n=s(6).f,a=s(9),i=s(1)("toStringTag");t.exports=function(t,e,s){t&&!a(t=s?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},function(t,e,s){t.exports={default:s(32),__esModule:!0}},function(t,e,s){"use strict";e.__esModule=!0;var n,a=s(43),i=(n=a)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,s=Array(t.length);e<t.length;e++)s[e]=t[e];return s}return(0,i.default)(t)}},function(t,e,s){s(33),t.exports=s(0).Object.assign},function(t,e,s){var n=s(4);n(n.S+n.F,"Object",{assign:s(37)})},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,s){t.exports=!s(3)&&!s(8)((function(){return 7!=Object.defineProperty(s(20)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,s){var n=s(12);t.exports=function(t,e){if(!n(t))return t;var s,a;if(e&&"function"==typeof(s=t.toString)&&!n(a=s.call(t)))return a;if("function"==typeof(s=t.valueOf)&&!n(a=s.call(t)))return a;if(!e&&"function"==typeof(s=t.toString)&&!n(a=s.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e,s){"use strict";var n=s(3),a=s(14),i=s(41),r=s(42),o=s(10),l=s(22),c=Object.assign;t.exports=!c||s(8)((function(){var t={},e={},s=Symbol(),n="abcdefghijklmnopqrst";return t[s]=7,n.split("").forEach((function(t){e[t]=t})),7!=c({},t)[s]||Object.keys(c({},e)).join("")!=n}))?function(t,e){for(var s=o(t),c=arguments.length,u=1,d=i.f,p=r.f;c>u;)for(var h,m=l(arguments[u++]),f=d?a(m).concat(d(m)):a(m),b=f.length,v=0;b>v;)h=f[v++],n&&!p.call(m,h)||(s[h]=m[h]);return s}:c},function(t,e,s){var n=s(9),a=s(21),i=s(39)(!1),r=s(17)("IE_PROTO");t.exports=function(t,e){var s,o=a(t),l=0,c=[];for(s in o)s!=r&&n(o,s)&&c.push(s);for(;e.length>l;)n(o,s=e[l++])&&(~i(c,s)||c.push(s));return c}},function(t,e,s){var n=s(21),a=s(24),i=s(40);t.exports=function(t){return function(e,s,r){var o,l=n(e),c=a(l.length),u=i(r,c);if(t&&s!=s){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===s)return t||u||0;return!t&&-1}}},function(t,e,s){var n=s(16),a=Math.max,i=Math.min;t.exports=function(t,e){return(t=n(t))<0?a(t+e,0):i(t,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,s){t.exports={default:s(44),__esModule:!0}},function(t,e,s){s(45),s(54),t.exports=s(0).Array.from},function(t,e,s){"use strict";var n=s(46)(!0);s(47)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,s=this._i;return s>=e.length?{value:void 0,done:!0}:(t=n(e,s),this._i+=t.length,{value:t,done:!1})}))},function(t,e,s){var n=s(16),a=s(15);t.exports=function(t){return function(e,s){var i,r,o=String(a(e)),l=n(s),c=o.length;return l<0||l>=c?t?"":void 0:(i=o.charCodeAt(l))<55296||i>56319||l+1===c||(r=o.charCodeAt(l+1))<56320||r>57343?t?o.charAt(l):i:t?o.slice(l,l+2):r-56320+(i-55296<<10)+65536}}},function(t,e,s){"use strict";var n=s(26),a=s(4),i=s(48),r=s(5),o=s(18),l=s(49),c=s(29),u=s(53),d=s(1)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,s,m,f,b,v){l(s,e,m);var y,g,S,C=function(t){if(!p&&t in _)return _[t];switch(t){case"keys":case"values":return function(){return new s(this,t)}}return function(){return new s(this,t)}},E=e+" Iterator",k="values"==f,T=!1,_=t.prototype,w=_[d]||_["@@iterator"]||f&&_[f],O=w||C(f),x=f?k?C("entries"):O:void 0,M="Array"==e&&_.entries||w;if(M&&(S=u(M.call(new t)))!==Object.prototype&&S.next&&(c(S,E,!0),n||"function"==typeof S[d]||r(S,d,h)),k&&w&&"values"!==w.name&&(T=!0,O=function(){return w.call(this)}),n&&!v||!p&&!T&&_[d]||r(_,d,O),o[e]=O,o[E]=h,f)if(y={values:k?O:C("values"),keys:b?O:C("keys"),entries:x},v)for(g in y)g in _||i(_,g,y[g]);else a(a.P+a.F*(p||T),e,y);return y}},function(t,e,s){t.exports=s(5)},function(t,e,s){"use strict";var n=s(50),a=s(13),i=s(29),r={};s(5)(r,s(1)("iterator"),(function(){return this})),t.exports=function(t,e,s){t.prototype=n(r,{next:a(1,s)}),i(t,e+" Iterator")}},function(t,e,s){var n=s(7),a=s(51),i=s(28),r=s(17)("IE_PROTO"),o=function(){},l=function(){var t,e=s(20)("iframe"),n=i.length;for(e.style.display="none",s(52).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[i[n]];return l()};t.exports=Object.create||function(t,e){var s;return null!==t?(o.prototype=n(t),s=new o,o.prototype=null,s[r]=t):s=l(),void 0===e?s:a(s,e)}},function(t,e,s){var n=s(6),a=s(7),i=s(14);t.exports=s(3)?Object.defineProperties:function(t,e){a(t);for(var s,r=i(e),o=r.length,l=0;o>l;)n.f(t,s=r[l++],e[s]);return t}},function(t,e,s){var n=s(2).document;t.exports=n&&n.documentElement},function(t,e,s){var n=s(9),a=s(10),i=s(17)("IE_PROTO"),r=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),n(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?r:null}},function(t,e,s){"use strict";var n=s(19),a=s(4),i=s(10),r=s(55),o=s(56),l=s(24),c=s(57),u=s(58);a(a.S+a.F*!s(60)((function(t){Array.from(t)})),"Array",{from:function(t){var e,s,a,d,p=i(t),h="function"==typeof this?this:Array,m=arguments.length,f=m>1?arguments[1]:void 0,b=void 0!==f,v=0,y=u(p);if(b&&(f=n(f,m>2?arguments[2]:void 0,2)),null==y||h==Array&&o(y))for(s=new h(e=l(p.length));e>v;v++)c(s,v,b?f(p[v],v):p[v]);else for(d=y.call(p),s=new h;!(a=d.next()).done;v++)c(s,v,b?r(d,f,[a.value,v],!0):a.value);return s.length=v,s}})},function(t,e,s){var n=s(7);t.exports=function(t,e,s,a){try{return a?e(n(s)[0],s[1]):e(s)}catch(e){var i=t.return;throw void 0!==i&&n(i.call(t)),e}}},function(t,e,s){var n=s(18),a=s(1)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||i[a]===t)}},function(t,e,s){"use strict";var n=s(6),a=s(13);t.exports=function(t,e,s){e in t?n.f(t,e,a(0,s)):t[e]=s}},function(t,e,s){var n=s(59),a=s(1)("iterator"),i=s(18);t.exports=s(0).getIteratorMethod=function(t){if(null!=t)return t[a]||t["@@iterator"]||i[n(t)]}},function(t,e,s){var n=s(23),a=s(1)("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,s,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(s=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),a))?s:i?n(e):"Object"==(r=n(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,s){var n=s(1)("iterator"),a=!1;try{var i=[7][n]();i.return=function(){a=!0},Array.from(i,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!a)return!1;var s=!1;try{var i=[7],r=i[n]();r.next=function(){return{done:s=!0}},i[n]=function(){return r},t(i)}catch(t){}return s}},function(t,e,s){s(62),t.exports=s(0).Object.keys},function(t,e,s){var n=s(10),a=s(14);s(63)("keys",(function(){return function(t){return a(n(t))}}))},function(t,e,s){var n=s(4),a=s(0),i=s(8);t.exports=function(t,e){var s=(a.Object||{})[t]||Object[t],r={};r[t]=e(s),n(n.S+n.F*i((function(){s(1)})),"Object",r)}},function(t,e,s){var n=s(65);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),(0,s(68).default)("d82ef3d4",n,!0,{})},function(t,e,s){(t.exports=s(66)(!1)).push([t.i,'.vjs-checkbox{position:absolute;left:-30px;color:#1f2d3d;user-select:none}.vjs-checkbox.is-checked .vjs-checkbox__inner{background-color:#1890ff;border-color:#0076e4}.vjs-checkbox.is-checked .vjs-checkbox__inner:after{transform:rotate(45deg) scaleY(1)}.vjs-checkbox .vjs-checkbox__inner{display:inline-block;position:relative;border:1px solid #bfcbd9;border-radius:2px;vertical-align:middle;box-sizing:border-box;width:16px;height:16px;background-color:#fff;z-index:1;cursor:pointer;transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46)}.vjs-checkbox .vjs-checkbox__inner:after{box-sizing:content-box;content:"";border:2px solid #fff;border-left:0;border-top:0;height:8px;left:4px;position:absolute;top:1px;transform:rotate(45deg) scaleY(0);width:4px;transition:transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;transform-origin:center}.vjs-checkbox .vjs-checkbox__original{opacity:0;outline:none;position:absolute;z-index:-1;top:0;left:0;right:0;bottom:0;margin:0}.vjs-radio{position:absolute;left:-30px;color:#1f2d3d;user-select:none}.vjs-radio.is-checked .vjs-radio__inner{background-color:#1890ff;border-color:#0076e4}.vjs-radio.is-checked .vjs-radio__inner:after{transform:translate(-50%,-50%) scale(1)}.vjs-radio .vjs-radio__inner{border:1px solid #bfcbd9;border-radius:100%;width:16px;height:16px;vertical-align:middle;background-color:#fff;position:relative;cursor:pointer;display:inline-block;box-sizing:border-box}.vjs-radio .vjs-radio__inner:after{width:4px;height:4px;border-radius:100%;background-color:#fff;content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(0);transition:transform .15s ease-in}.vjs-radio .vjs-radio__original{opacity:0;outline:none;position:absolute;z-index:-1;top:0;left:0;right:0;bottom:0;margin:0}.vjs-tree{font-family:Monaco,Menlo,Consolas,Bitstream Vera Sans Mono,monospace;font-size:14px}.vjs-tree.is-root{position:relative}.vjs-tree.is-root.has-selectable-control{margin-left:30px}.vjs-tree.is-mouseover{background-color:#e6f7ff}.vjs-tree.is-highlight-selected{background-color:#ccefff}.vjs-tree .vjs-tree__content{padding-left:1em}.vjs-tree .vjs-tree__content.has-line{border-left:1px dotted #bfcbd9}.vjs-tree .vjs-tree__brackets{cursor:pointer}.vjs-tree .vjs-tree__brackets:hover{color:#1890ff}.vjs-tree .vjs-comment{color:#bfcbd9}.vjs-tree .vjs-value__null{color:#ff4949}.vjs-tree .vjs-value__boolean,.vjs-tree .vjs-value__number{color:#1d8ce0}.vjs-tree .vjs-value__string{color:#13ce66}',""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s=function(t,e){var s,n=t[1]||"",a=t[3];if(!a)return n;if(e&&"function"==typeof btoa){var i=(s=a,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),r=a.sources.map((function(t){return"/*# sourceURL="+a.sourceRoot+t+" */"}));return[n].concat(r).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+s+"}":s})).join("")},e.i=function(t,s){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},a=0;a<this.length;a++){var i=this[a][0];"number"==typeof i&&(n[i]=!0)}for(a=0;a<t.length;a++){var r=t[a];"number"==typeof r[0]&&n[r[0]]||(s&&!r[2]?r[2]=s:s&&(r[2]="("+r[2]+") and ("+s+")"),e.push(r))}},e}},function(t,e,s){"use strict";s.r(e);var n=s(30),a=s.n(n),i=s(31),r=s.n(i),o=s(11),l=s.n(o);function c(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function u(t,e,s,n,a,i,r,o){var l=typeof(t=t||{}).default;"object"!==l&&"function"!==l||(t=t.default);var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=s,u._compiled=!0),n&&(u.functional=!0),i&&(u._scopeId=i),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=c):a&&(c=o?function(){a.call(this,this.$root.$options.shadowRoot)}:a),c)if(u.functional){u._injectStyles=c;var d=u.render;u.render=function(t,e){return c.call(e),d(t,e)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:u}}var d=u({props:{showDoubleQuotes:Boolean,parentData:{type:[String,Number,Boolean,Array,Object],default:null},data:{type:[String,Number,Boolean],default:""},showComma:Boolean,currentKey:{type:[Number,String],default:""},customValueFormatter:{type:Function,default:null}},computed:{valueClass:function(){return"vjs-value vjs-value__"+this.dataType},dataType:function(){return c(this.data)}},methods:{defaultFormatter:function(t){var e=t+"";return"string"===this.dataType&&(e='"'+e+'"'),this.showComma&&(e+=","),e},customFormatter:function(t){return this.customValueFormatter?this.customValueFormatter(t,this.currentKey,this.parentData,this.defaultFormatter(t)):this.defaultFormatter(t)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._t("default"),t._v(" "),t.customValueFormatter?s("span",{class:t.valueClass,domProps:{innerHTML:t._s(t.customFormatter(t.data))}}):s("span",{class:t.valueClass},[t._v(t._s(t.defaultFormatter(t.data)))])],2)}),[],!1,null,null,null).exports,p=u({props:{value:{type:Boolean,default:!1}},data:function(){return{focus:!1}},computed:{model:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{class:["vjs-checkbox",t.value?"is-checked":""],on:{click:function(t){t.stopPropagation()}}},[s("span",{staticClass:"vjs-checkbox__inner"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"vjs-checkbox__original",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.model)?t._i(t.model,null)>-1:t.model},on:{change:[function(e){var s=t.model,n=e.target,a=!!n.checked;if(Array.isArray(s)){var i=t._i(s,null);n.checked?i<0&&(t.model=s.concat([null])):i>-1&&(t.model=s.slice(0,i).concat(s.slice(i+1)))}else t.model=a},function(e){return t.$emit("change",t.model)}],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}})])}),[],!1,null,null,null).exports,h=u({props:{path:{type:String,default:""},value:{type:String,default:""}},data:function(){return{focus:!1}},computed:{currentPath:function(){return this.path},model:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{change:function(){this.$emit("change",this.model)}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{class:["vjs-radio",t.model===t.currentPath?"is-checked":""],on:{click:function(t){t.stopPropagation()}}},[s("span",{staticClass:"vjs-radio__inner"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"vjs-radio__original",attrs:{type:"radio"},domProps:{value:t.currentPath,checked:t._q(t.model,t.currentPath)},on:{change:[function(e){t.model=t.currentPath},t.change],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}})])}),[],!1,null,null,null).exports,m={props:{visible:{required:!0,type:Boolean},data:{required:!0},showComma:Boolean,collapsedOnClickBrackets:Boolean},computed:{dataVisiable:{get:function(){return this.visible},set:function(t){this.collapsedOnClickBrackets&&this.$emit("update:visible",t)}}},methods:{toggleBrackets:function(){this.dataVisiable=!this.dataVisiable},bracketsFormatter:function(t){return this.showComma?t+",":t}}},f=u({mixins:[m],props:{showLength:Boolean},methods:{closedBracketsGenerator:function(t){var e=Array.isArray(t)?"[...]":"{...}";return this.bracketsFormatter(e)},lengthGenerator:function(t){return" // "+(Array.isArray(t)?t.length+" items":l()(t).length+" keys")}}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._t("default"),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.dataVisiable,expression:"dataVisiable"}],staticClass:"vjs-tree__brackets",on:{click:function(e){return e.stopPropagation(),t.toggleBrackets(e)}}},[t._v("\n    "+t._s(Array.isArray(t.data)?"[":"{")+"\n  ")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.dataVisiable,expression:"!dataVisiable"}]},[s("span",{staticClass:"vjs-tree__brackets",on:{click:function(e){return e.stopPropagation(),t.toggleBrackets(e)}}},[t._v("\n      "+t._s(t.closedBracketsGenerator(t.data))+"\n    ")]),t._v(" "),t.showLength?s("span",{staticClass:"vjs-comment"},[t._v("\n      "+t._s(t.lengthGenerator(t.data))+"\n    ")]):t._e()])],2)}),[],!1,null,null,null).exports,b=u({mixins:[m]},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.dataVisiable,expression:"dataVisiable"}]},[s("span",{staticClass:"vjs-tree__brackets",on:{click:function(e){return e.stopPropagation(),t.toggleBrackets(e)}}},[t._v("\n    "+t._s(t.bracketsFormatter(Array.isArray(t.data)?"]":"}"))+"\n  ")])])}),[],!1,null,null,null),v=u({name:"VueJsonPretty",components:{SimpleText:d,VueCheckbox:p,VueRadio:h,BracketsLeft:f,BracketsRight:b.exports},props:{data:{type:[String,Number,Boolean,Array,Object],default:null},deep:{type:Number,default:1/0},showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},path:{type:String,default:"root"},selectableType:{type:String,default:""},showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},selectOnClickNode:{type:Boolean,default:!0},value:{type:[Array,String],default:function(){return""}},pathSelectable:{type:Function,default:function(){return!0}},highlightMouseoverNode:{type:Boolean,default:!1},highlightSelectedNode:{type:Boolean,default:!0},collapsedOnClickBrackets:{type:Boolean,default:!0},customValueFormatter:{type:Function,default:null},parentData:{type:[String,Number,Boolean,Array,Object],default:null},currentDeep:{type:Number,default:1},currentKey:{type:[Number,String],default:""}},data:function(){return{visible:this.currentDeep<=this.deep,isMouseover:!1,currentCheckboxVal:!!Array.isArray(this.value)&&this.value.includes(this.path)}},computed:{model:{get:function(){var t="multiple"===this.selectableType?[]:"single"===this.selectableType?"":null;return this.value||t},set:function(t){this.$emit("input",t)}},lastKey:function(){if(Array.isArray(this.parentData))return this.parentData.length-1;if(this.isObject(this.parentData)){var t=l()(this.parentData);return t[t.length-1]}return""},notLastKey:function(){return this.currentKey!==this.lastKey},selectable:function(){return this.pathSelectable(this.path,this.data)&&(this.isMultiple||this.isSingle)},isMultiple:function(){return"multiple"===this.selectableType},isSingle:function(){return"single"===this.selectableType},isSelected:function(){return this.isMultiple?this.model.includes(this.path):!!this.isSingle&&this.model===this.path},propsError:function(){return!this.selectableType||this.selectOnClickNode||this.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}},watch:{deep:function(t){this.visible=this.currentDeep<=t},propsError:{handler:function(t){if(t)throw new Error("[vue-json-pretty] "+t)},immediate:!0}},methods:{handleValueChange:function(t){var e=this;if(!this.isMultiple||"checkbox"!==t&&"tree"!==t){if(this.isSingle&&("radio"===t||"tree"===t)&&this.model!==this.path){var s=this.model,n=this.path;this.model=n,this.$emit("change",n,s)}}else{var a=this.model.findIndex((function(t){return t===e.path})),i=[].concat(r()(this.model));-1!==a?this.model.splice(a,1):this.model.push(this.path),"checkbox"!==t&&(this.currentCheckboxVal=!this.currentCheckboxVal),this.$emit("change",this.model,i)}},handleClick:function(t){t._uid&&t._uid!==this._uid||(t._uid=this._uid,this.$emit("click",this.path,this.data),this.selectable&&this.selectOnClickNode&&this.handleValueChange("tree"))},handleItemClick:function(t,e){this.$emit("click",t,e)},handleItemChange:function(t,e){this.selectable&&this.$emit("change",t,e)},handleMouseover:function(){this.highlightMouseoverNode&&(this.selectable||""===this.selectableType)&&(this.isMouseover=!0)},handleMouseout:function(){this.highlightMouseoverNode&&(this.selectable||""===this.selectableType)&&(this.isMouseover=!1)},isObject:function(t){return"object"===c(t)},keyFormatter:function(t){return this.showDoubleQuotes?'"'+t+'"':t}},errorCaptured:function(){return!1}},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"vjs-tree":!0,"has-selectable-control":t.isMultiple||t.showSelectController,"is-root":1===t.currentDeep,"is-selectable":t.selectable,"is-selected":t.isSelected,"is-highlight-selected":t.isSelected&&t.highlightSelectedNode,"is-mouseover":t.isMouseover},on:{click:t.handleClick,mouseover:function(e){return e.stopPropagation(),t.handleMouseover(e)},mouseout:function(e){return e.stopPropagation(),t.handleMouseout(e)}}},[t.showSelectController&&t.selectable?[t.isMultiple?s("vue-checkbox",{on:{change:function(e){return t.handleValueChange("checkbox")}},model:{value:t.currentCheckboxVal,callback:function(e){t.currentCheckboxVal=e},expression:"currentCheckboxVal"}}):t.isSingle?s("vue-radio",{attrs:{path:t.path},on:{change:function(e){return t.handleValueChange("radio")}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}):t._e()]:t._e(),t._v(" "),Array.isArray(t.data)||t.isObject(t.data)?[s("brackets-left",{attrs:{visible:t.visible,data:t.data,"show-length":t.showLength,"collapsed-on-click-brackets":t.collapsedOnClickBrackets,"show-comma":t.notLastKey},on:{"update:visible":function(e){t.visible=e}}},[t.currentDeep>1&&!Array.isArray(t.parentData)?s("span",{staticClass:"vjs-key"},[t._v("\n        "+t._s(t.keyFormatter(t.currentKey))+":\n      ")]):t._e()]),t._v(" "),t._l(t.data,(function(e,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],key:n,class:{"vjs-tree__content":!0,"has-line":t.showLine}},[s("vue-json-pretty",{attrs:{"parent-data":t.data,data:e,deep:t.deep,"show-length":t.showLength,"show-double-quotes":t.showDoubleQuotes,"show-line":t.showLine,"highlight-mouseover-node":t.highlightMouseoverNode,"highlight-selected-node":t.highlightSelectedNode,path:t.path+(Array.isArray(t.data)?"["+n+"]":"."+n),"path-selectable":t.pathSelectable,"selectable-type":t.selectableType,"show-select-controller":t.showSelectController,"select-on-click-node":t.selectOnClickNode,"collapsed-on-click-brackets":t.collapsedOnClickBrackets,"current-key":n,"current-deep":t.currentDeep+1,"custom-value-formatter":t.customValueFormatter},on:{click:t.handleItemClick,change:t.handleItemChange},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)})),t._v(" "),s("brackets-right",{attrs:{visible:t.visible,data:t.data,"collapsed-on-click-brackets":t.collapsedOnClickBrackets,"show-comma":t.notLastKey},on:{"update:visible":function(e){t.visible=e}}})]:s("simple-text",{attrs:{"custom-value-formatter":t.customValueFormatter,"show-double-quotes":t.showDoubleQuotes,"show-comma":t.notLastKey,"parent-data":t.parentData,data:t.data,"current-key":t.currentKey}},[t.parentData&&t.currentKey&&!Array.isArray(t.parentData)?s("span",{staticClass:"vjs-key"},[t._v("\n      "+t._s(t.keyFormatter(t.currentKey))+":\n    ")]):t._e()])],2)}),[],!1,null,null,null).exports;s(64),e.default=a()({},v,{version:"1.6.7"})},function(t,e,s){"use strict";function n(t,e){for(var s=[],n={},a=0;a<e.length;a++){var i=e[a],r=i[0],o={id:t+":"+a,css:i[1],media:i[2],sourceMap:i[3]};n[r]?n[r].parts.push(o):s.push(n[r]={id:r,parts:[o]})}return s}s.r(e),s.d(e,"default",(function(){return h}));var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},r=a&&(document.head||document.getElementsByTagName("head")[0]),o=null,l=0,c=!1,u=function(){},d=null,p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(t,e,s,a){c=s,d=a||{};var r=n(t,e);return m(r),function(e){for(var s=[],a=0;a<r.length;a++){var o=r[a];(l=i[o.id]).refs--,s.push(l)}for(e?m(r=n(t,e)):r=[],a=0;a<s.length;a++){var l;if(0===(l=s[a]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete i[l.id]}}}}function m(t){for(var e=0;e<t.length;e++){var s=t[e],n=i[s.id];if(n){n.refs++;for(var a=0;a<n.parts.length;a++)n.parts[a](s.parts[a]);for(;a<s.parts.length;a++)n.parts.push(b(s.parts[a]));n.parts.length>s.parts.length&&(n.parts.length=s.parts.length)}else{var r=[];for(a=0;a<s.parts.length;a++)r.push(b(s.parts[a]));i[s.id]={id:s.id,refs:1,parts:r}}}}function f(){var t=document.createElement("style");return t.type="text/css",r.appendChild(t),t}function b(t){var e,s,n=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(n){if(c)return u;n.parentNode.removeChild(n)}if(p){var a=l++;n=o||(o=f()),e=g.bind(null,n,a,!1),s=g.bind(null,n,a,!0)}else n=f(),e=S.bind(null,n),s=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else s()}}var v,y=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function g(t,e,s,n){var a=s?"":n.css;if(t.styleSheet)t.styleSheet.cssText=y(e,a);else{var i=document.createTextNode(a),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(i,r[e]):t.appendChild(i)}}function S(t,e){var s=e.css,n=e.media,a=e.sourceMap;if(n&&t.setAttribute("media",n),d.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),a&&(s+="\n/*# sourceURL="+a.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}}])}))},d6db:function(t,e,s){"use strict";var n=s("e67a"),a=s.n(n);a.a},dd5e:function(t,e,s){"use strict";var n=s("0fe9"),a=s.n(n);a.a},de26:function(t,e,s){},e67a:function(t,e,s){},e8aa:function(t,e,s){},f12a:function(t,e,s){"use strict";var n=s("4135"),a=s.n(n);a.a},f41c:function(t,e,s){"use strict";var n=s("4628"),a=s.n(n);a.a},fa3c:function(t,e,s){}}]);
//# sourceMappingURL=login.fd6d8312.js.map